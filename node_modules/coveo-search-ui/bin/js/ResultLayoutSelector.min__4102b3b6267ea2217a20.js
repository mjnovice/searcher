webpackJsonpCoveo__temporary([34],{14:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),s=function(){function t(){}return t.addClassToSVGInContainer=function(e,o){var n=e.querySelector("svg");n.setAttribute("class",""+t.getClass(n)+o)},t.removeClassFromSVGInContainer=function(e,o){var n=e.querySelector("svg");n.setAttribute("class",t.getClass(n).replace(o,""))},t.addStyleToSVGInContainer=function(t,e){var o=t.querySelector("svg");n.each(e,function(t,e){o.style[e]=t})},t.getClass=function(t){var e=t.getAttribute("class");return e?e+" ":""},t}();e.SVGDom=s},190:function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),o(621);var s=o(0),i=o(16),u=o(11),a=o(128),r=o(31),l=o(5),c=o(15),y=o(13),h=o(3),p=o(6),d=o(1),L=o(14),v=o(12),f=o(4),b=o(10),m=o(7),C=o(8),g=o(2),S=o(622),R=o(17);e.defaultLayout="list";var A=function(t){function e(o,n,s){var a=t.call(this,o,e.ID,s)||this;return a.element=o,a.options=n,a.options=C.ComponentOptions.initComponentOptions(o,e,n),a.currentActiveLayouts={},a.bind.onQueryState(c.MODEL_EVENTS.CHANGE_ONE,y.QUERY_STATE_ATTRIBUTES.LAYOUT,a.handleQueryStateChanged.bind(a)),a.bind.onRootElement(u.QueryEvents.querySuccess,function(t){return a.handleQuerySuccess(t)}),a.bind.onRootElement(u.QueryEvents.queryError,function(t){return a.handleQueryError(t)}),a.resultLayoutSection=d.$$(a.element).closest(".coveo-result-layout-section"),a.bind.oneRootElement(i.InitializationEvents.afterComponentsInitialization,function(){return a.populate()}),a.bind.oneRootElement(i.InitializationEvents.afterInitialization,function(){return a.handleQueryStateChanged()}),S.ResponsiveResultLayout.init(a.root,a,{}),a}return n(e,t),Object.defineProperty(e.prototype,"activeLayouts",{get:function(){return this.currentActiveLayouts},enumerable:!0,configurable:!0}),e.prototype.changeLayout=function(t){if(l.Assert.check(this.isLayoutDisplayedByButton(t),"Layout not available or invalid"),t!==this.currentLayout||""===this.getModelValue()){this.setModelValue(t);var e=this.queryController.getLastResults();this.setLayout(t,e),e?this.usageAnalytics.logCustomEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:t},this.element):(this.usageAnalytics.logSearchEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:t}),this.queryController.firstQuery||this.queryController.executeQuery())}},e.prototype.getCurrentLayout=function(){return this.currentLayout},e.prototype.disableLayouts=function(t){var e=this;if(f.Utils.isNonEmptyArray(t)){s.each(t,function(t){return e.disableLayout(t)});var o=s.difference(s.keys(this.currentActiveLayouts),t);if(s.isEmpty(o)){this.logger.error("Cannot disable the last valid layout ... Re-enabling the first one possible");var n=s.keys(this.currentActiveLayouts)[0];this.enableLayout(n),this.setLayout(n)}else{var i=s.contains(o,this.currentLayout)?this.currentLayout:o[0];this.changeLayout(i)}}},e.prototype.enableLayouts=function(t){var e=this;s.each(t,function(t){e.enableLayout(t)})},e.prototype.disableLayout=function(t){this.isLayoutDisplayedByButton(t)&&this.hideButton(t)},e.prototype.enableLayout=function(t){var e=this.resultLists;s.find(e,function(e){return e.options.layout==t})&&this.isLayoutDisplayedByButton(t)&&(this.showButton(t),this.updateSelectorAppearance())},Object.defineProperty(e.prototype,"resultLists",{get:function(){return this.searchInterface.getComponents("ResultList")},enumerable:!0,configurable:!0}),e.prototype.hideButton=function(t){if(this.isLayoutDisplayedByButton(t)){var e=this.currentActiveLayouts[t].button;d.$$(e.el).addClass("coveo-hidden"),e.visible=!1,this.updateSelectorAppearance()}},e.prototype.showButton=function(t){if(this.isLayoutDisplayedByButton(t)){var e=this.currentActiveLayouts[t].button;d.$$(e.el).removeClass("coveo-hidden"),e.visible=!0}},e.prototype.setLayout=function(t,e){t&&(this.currentLayout&&d.$$(this.currentActiveLayouts[this.currentLayout].button.el).removeClass("coveo-selected"),d.$$(this.currentActiveLayouts[t].button.el).addClass("coveo-selected"),this.currentLayout=t,d.$$(this.element).trigger(r.ResultListEvents.changeLayout,{layout:t,results:e}))},e.prototype.handleQuerySuccess=function(t){this.hasNoResults=0==t.results.results.length,this.shouldShowSelector()?this.show():this.hide()},e.prototype.handleQueryStateChanged=function(t){var e=this.getModelValue(),o=s.find(s.keys(this.currentActiveLayouts),function(t){return t===e});void 0!==o?this.setLayout(o):this.setLayout(s.keys(this.currentActiveLayouts)[0])},e.prototype.handleQueryError=function(t){this.hasNoResults=!0,this.hide()},e.prototype.updateSelectorAppearance=function(){this.shouldShowSelector()?this.show():this.hide()},e.prototype.populate=function(){var t=this,o={layouts:[]};d.$$(this.root).trigger(a.ResultLayoutEvents.populateResultLayout,o);var n=s.uniq(o.layouts.map(function(t){return t.toLowerCase()}));s.each(n,function(t){return l.Assert.check(s.contains(e.validLayouts,t),"Invalid layout")}),s.isEmpty(n)||(s.each(n,function(e){return t.addButton(e)}),this.shouldShowSelector()||this.hide())},e.prototype.addButton=function(t){var e=this,o=d.$$("span",{className:"coveo-result-layout-selector"}),n=d.$$("span",{className:"coveo-result-layout-selector-caption"},p.l(t));o.append(n.el);var s=d.$$("span",{className:"coveo-icon coveo-"+t+"-layout-icon"},v.SVGIcons.icons[t+"Layout"]);L.SVGDom.addClassToSVGInContainer(s.el,"coveo-"+t+"-svg"),o.prepend(s.el);var i=function(){return e.changeLayout(t)};(new R.AccessibleButton).withElement(o).withLabel(p.l("DisplayResultsAs",p.l(t))).withSelectAction(i).withOwner(this.bind).build(),t===this.currentLayout&&o.addClass("coveo-selected"),d.$$(this.element).append(o.el),this.currentActiveLayouts[t]={button:{visible:!0,el:o.el},enabled:!0}},e.prototype.hide=function(){var t=this.resultLayoutSection||this.element;d.$$(t).addClass("coveo-result-layout-hidden")},e.prototype.show=function(){var t=this.resultLayoutSection||this.element;d.$$(t).removeClass("coveo-result-layout-hidden")},e.prototype.getModelValue=function(){return this.queryStateModel.get(y.QueryStateModel.attributesEnum.layout)},e.prototype.setModelValue=function(t){this.queryStateModel.set(y.QueryStateModel.attributesEnum.layout,t)},e.prototype.shouldShowSelector=function(){return s.keys(this.currentActiveLayouts).length>1&&s.filter(this.currentActiveLayouts,function(t){return t.button.visible}).length>1&&!this.hasNoResults},e.prototype.isLayoutDisplayedByButton=function(t){return s.contains(s.keys(this.currentActiveLayouts),t)},e.ID="ResultLayoutSelector",e.aliases=["ResultLayout"],e.doExport=function(){h.exportGlobally({ResultLayoutSelector:e,ResultLayout:e})},e.validLayouts=["list","card","table"],e.options={mobileLayouts:C.ComponentOptions.buildListOption({defaultValue:["card","table"]}),tabletLayouts:C.ComponentOptions.buildListOption({defaultValue:["list","card","table"]}),desktopLayouts:C.ComponentOptions.buildListOption({defaultValue:["list","card","table"]})},e}(m.Component);e.ResultLayoutSelector=A,g.Initialization.registerAutoCreateComponent(A)},621:function(t,e){},622:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),s=o(9),i=o(1),u=o(7),a=o(190),r=o(18),l=o(58),c=function(){function t(t,e,o,n){this.coveoRoot=t,this.ID=e,this.searchInterface=u.Component.get(this.coveoRoot.el,r.SearchInterface,!1)}return t.init=function(e,o,n){if(!i.$$(e).find("."+u.Component.computeCssClassName(a.ResultLayoutSelector))){return void new s.Logger("ResponsiveResultLayout").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}l.ResponsiveComponentsManager.register(t,i.$$(e),a.ResultLayoutSelector.ID,o,n)},t.prototype.registerComponent=function(t){return t instanceof a.ResultLayoutSelector&&(this.resultLayout=t,!0)},t.prototype.handleResizeEvent=function(){this.needSmallMode()?this.enableAndDisableLayouts(this.resultLayout.options.mobileLayouts):this.needMediumMode()?this.enableAndDisableLayouts(this.resultLayout.options.tabletLayouts):this.enableAndDisableLayouts(this.resultLayout.options.desktopLayouts)},t.prototype.enableAndDisableLayouts=function(t){var e=n.difference(a.ResultLayoutSelector.validLayouts,t),o=n.intersection(a.ResultLayoutSelector.validLayouts,t);this.resultLayout.disableLayouts(e),this.resultLayout.enableLayouts(o)},t.prototype.needSmallMode=function(){switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"small":return!0;case"auto":return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth();default:return!1}},t.prototype.needMediumMode=function(){switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"medium":return!0;case"auto":return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();default:return!1}},t}();e.ResponsiveResultLayout=c}});