webpackJsonpCoveo__temporary([12,21],{109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(87),s=n(1),r=n(0),a=n(9),l=function(){function e(){}return e.hideIfInfiniteScrollEnabled=function(t){e.isInfiniteScrollEnabled(t.searchInterface.element)?(t.disable(),s.$$(t.element).hide(),e.warnIfComponentNotNeeded(t)):(t.enable(),s.$$(t.element).unhide())},e.isInfiniteScrollEnabled=function(t){var n=e.getActiveResultList(t);return!!n&&!!n.options.enableInfiniteScroll},e.scrollToTop=function(t){var n=e.getActiveResultList(t);if(!n)return new a.Logger(this).warn("No active ResultList, scrolling to the top of the Window"),window.scrollTo(0,0);var i=n.options.infiniteScrollContainer;if("function"==typeof i.scrollTo){var o=n.searchInterface.element.getBoundingClientRect().top;i.scrollTo(0,window.pageYOffset+o)}else i.scrollTop=0},e.getActiveResultList=function(t){var n=e.getResultLists(t);return r.find(n,function(e){return!e.disabled})},e.getResultLists=function(t){return s.$$(t).findAll("."+e.cssClass()).map(function(e){return i.Component.get(e,o.ResultList)})},e.cssClass=function(){return i.Component.computeCssClassName(o.ResultList)},e.warnIfComponentNotNeeded=function(t){var n=t.searchInterface.root;e.allResultListsUseInfiniteScroll(n)&&e.notNeededComponentWarning(t)},e.allResultListsUseInfiniteScroll=function(t){return 0===e.getResultLists(t).filter(function(e){return!e.options.enableInfiniteScroll}).length},e.notNeededComponentWarning=function(t){var n=i.Component.computeCssClassNameForType(t.type),o="The "+n+" component is not needed because all "+e.cssClass()+" components have enableInfiniteScroll set to 'true'.\n    For the best performance, remove the "+n+" component from your search page.";new a.Logger(t).warn(o)},e}();t.ResultListUtils=l},114:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,a)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0}),n(206);var a=n(0),l=n(1),u=n(3),c=n(7),p=n(8),h=n(2),d=n(81),f=n(502),m=n(503),y=n(445),g=n(446),v=n(11),b=n(13),C=n(447),O=n(4),S=n(15),F=n(5),T=n(505),w=n(6),_=n(22),V=n(32),A=n(10),R=n(506),D=n(109),E=n(169),$=n(168),I=n(514),x=function(e){function t(n,i,o,s){void 0===s&&(s=t.ID);var r=e.call(this,n,s,o)||this;return r.element=n,r.listenToQueryStateChange=!0,r.position=null,r.moreValuesAvailable=!1,r.isDynamicFacet=!0,r.handleQueryStateChangedIncluded=function(e){var t=r.values.selectedValues,n=e.filter(function(e){return r.values.get(e)}),i=a.difference(n,t),o=a.difference(t,n);O.Utils.isNonEmptyArray(i)&&r.selectMultipleValues(i),O.Utils.isNonEmptyArray(o)&&r.deselectMultipleValues(o)},r.options=p.ComponentOptions.initComponentOptions(n,t,i),r.initDynamicFacetQueryController(),r.initDependsOnManager(),r.initQueryEvents(),r.initQueryStateEvents(),r.initBreadCrumbEvents(),r.initComponentStateEvents(),r.initValues(),r.verifyCollapsingConfiguration(),r.isCollapsed=r.options.enableCollapse&&r.options.collapsedByDefault,f.ResponsiveDynamicFacets.init(r.root,r,r.options),r}return i(t,e),Object.defineProperty(t.prototype,"fieldName",{get:function(){return this.options.field.slice(1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"facetType",{get:function(){return E.FacetType.specific},enumerable:!0,configurable:!0}),t.prototype.selectValue=function(e){F.Assert.exists(e),this.selectMultipleValues([e])},t.prototype.selectMultipleValues=function(e){var t=this;F.Assert.exists(e),this.ensureDom(),this.logger.info("Selecting facet value(s)",e),e.forEach(function(e){t.values.get(e).select()}),this.updateQueryStateModel()},t.prototype.deselectValue=function(e){F.Assert.exists(e),this.deselectMultipleValues([e])},t.prototype.deselectMultipleValues=function(e){var t=this;F.Assert.exists(e),this.ensureDom(),this.logger.info("Deselecting facet value(s)",e),e.forEach(function(e){t.values.get(e).deselect()}),this.updateQueryStateModel()},t.prototype.toggleSelectValue=function(e){F.Assert.exists(e),this.ensureDom();var t=this.values.get(e);t.toggleSelect(),this.logger.info("Toggle select facet value",t),this.updateQueryStateModel()},t.prototype.showMoreValues=function(e){var t=this;void 0===e&&(e=this.options.numberOfValues),this.ensureDom(),this.logger.info("Show more values"),this.dynamicFacetQueryController.increaseNumberOfValuesToRequest(e),this.triggerNewIsolatedQuery(function(){return t.logAnalyticsFacetShowMoreLess(A.analyticsActionCauseList.dynamicFacetShowMore)})},t.prototype.showLessValues=function(){var e=this;this.ensureDom(),this.logger.info("Show less values"),this.dynamicFacetQueryController.resetNumberOfValuesToRequest(),this.triggerNewIsolatedQuery(function(){return e.logAnalyticsFacetShowMoreLess(A.analyticsActionCauseList.dynamicFacetShowLess)})},t.prototype.reset=function(){this.ensureDom(),this.values.hasActiveValues&&(this.logger.info("Deselect all values"),this.values.clearAll(),this.values.render()),this.updateAppearance(),this.updateQueryStateModel()},t.prototype.toggleCollapse=function(){this.isCollapsed?this.expand():this.collapse()},t.prototype.expand=function(){if(!this.options.enableCollapse)return this.logger.warn('Calling expand() won\'t do anything on a facet that has the option "enableCollapse" set to "false"');this.isCollapsed&&(this.ensureDom(),this.logger.info("Expand facet values"),this.isCollapsed=!1,this.updateAppearance())},t.prototype.collapse=function(){if(!this.options.enableCollapse)return this.logger.warn('Calling collapse() won\'t do anything on a facet that has the option "enableCollapse" set to "false"');this.isCollapsed||(this.ensureDom(),this.logger.info("Collapse facet values"),this.isCollapsed=!0,this.updateAppearance())},t.prototype.enableFreezeCurrentValuesFlag=function(){F.Assert.exists(this.dynamicFacetQueryController),this.dynamicFacetQueryController.enableFreezeCurrentValuesFlag()},t.prototype.enableFreezeFacetOrderFlag=function(){F.Assert.exists(this.dynamicFacetQueryController),this.dynamicFacetQueryController.enableFreezeFacetOrderFlag()},t.prototype.scrollToTop=function(){this.options.enableScrollToTop&&D.ResultListUtils.scrollToTop(this.root)},Object.defineProperty(t.prototype,"analyticsFacetState",{get:function(){return this.values.activeValues.map(function(e){return e.analyticsFacetState})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"basicAnalyticsFacetState",{get:function(){return{field:this.options.field.toString(),id:this.options.id,title:this.options.title,facetType:this.facetType,facetPosition:this.position}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"basicAnalyticsFacetMeta",{get:function(){return{facetField:this.options.field.toString(),facetId:this.options.id,facetTitle:this.options.title}},enumerable:!0,configurable:!0}),t.prototype.logAnalyticsEvent=function(e,t){this.usageAnalytics.logSearchEvent(e,t)},t.prototype.putStateIntoQueryBuilder=function(e){F.Assert.exists(e),this.dynamicFacetQueryController.putFacetIntoQueryBuilder(e)},t.prototype.putStateIntoAnalytics=function(){var e=this.usageAnalytics.getPendingSearchEvent();e&&e.addFacetState(this.analyticsFacetState)},t.prototype.isCurrentlyDisplayed=function(){return l.$$(this.element).isVisible()},Object.defineProperty(t.prototype,"hasActiveValues",{get:function(){return this.values.hasActiveValues},enumerable:!0,configurable:!0}),t.prototype.initQueryEvents=function(){var e=this;this.bind.onRootElement(v.QueryEvents.duringQuery,function(){return e.ensureDom()}),this.bind.onRootElement(v.QueryEvents.doneBuildingQuery,function(t){return e.handleDoneBuildingQuery(t)}),this.bind.onRootElement(v.QueryEvents.querySuccess,function(t){return e.handleQuerySuccess(t.results)}),this.bind.onRootElement(v.QueryEvents.queryError,function(){return e.onNoValues()})},t.prototype.initQueryStateEvents=function(){this.includedAttributeId=b.QueryStateModel.getFacetId(this.options.id),this.queryStateModel.registerNewAttribute(this.includedAttributeId,[]),this.bind.onQueryState(S.MODEL_EVENTS.CHANGE,void 0,this.handleQueryStateChanged),this.dependsOnManager.listenToParentIfDependentFacet()},t.prototype.initBreadCrumbEvents=function(){var e=this;this.options.includeInBreadcrumb&&(this.bind.onRootElement(V.BreadcrumbEvents.populateBreadcrumb,function(t){return e.handlePopulateBreadcrumb(t)}),this.bind.onRootElement(V.BreadcrumbEvents.clearBreadcrumb,function(){return e.reset()}))},t.prototype.initValues=function(){this.values=new g.DynamicFacetValues(this,I.DynamicFacetValueCreator)},t.prototype.initComponentStateEvents=function(){var e=b.QueryStateModel.getFacetId(this.options.id);this.componentStateModel.registerComponent(e,this)},t.prototype.initDynamicFacetQueryController=function(){this.dynamicFacetQueryController=new C.DynamicFacetQueryController(this)},t.prototype.handleDoneBuildingQuery=function(e){this.dynamicFacetManager||(F.Assert.exists(e),F.Assert.exists(e.queryBuilder),this.putStateIntoQueryBuilder(e.queryBuilder),this.putStateIntoAnalytics())},t.prototype.handleQuerySuccess=function(e){if(!this.dynamicFacetManager)return O.Utils.isNullOrUndefined(e.facets)?this.notImplementedError():void this.handleQueryResults(e)},t.prototype.handleQueryResults=function(e){var t=a.findIndex(e.facets,{facetId:this.options.id}),n=-1!==t?e.facets[t]:null;this.position=n?t+1:null,n?this.onNewValues(n):this.onNoValues(),this.header.hideLoading(),this.updateQueryStateModel(),this.values.render(),this.updateAppearance()},t.prototype.onNewValues=function(e){this.moreValuesAvailable=e.moreValuesAvailable,this.values.createFromResponse(e)},t.prototype.onNoValues=function(){this.moreValuesAvailable=!1,this.values.resetValues()},t.prototype.handleQueryStateChanged=function(e){if(this.listenToQueryStateChange){var t=e.attributes[this.includedAttributeId];t&&this.handleQueryStateChangedIncluded(t)}},t.prototype.handlePopulateBreadcrumb=function(e){if(F.Assert.exists(e),this.values.hasActiveValues){var t=new m.DynamicFacetBreadcrumbs(this);e.breadcrumbs.push({element:t.element})}},t.prototype.initDependsOnManager=function(){var e=this,t={reset:function(){return e.reset()},toggleDependentFacet:function(t){return e.toggleDependentFacet(t)},element:this.element,root:this.root,dependsOn:this.options.dependsOn,id:this.options.id,queryStateModel:this.queryStateModel,bind:this.bind};this.dependsOnManager=new $.DependsOnManager(t)},t.prototype.toggleDependentFacet=function(e){this.values.hasSelectedValues?e.enable():e.disable()},t.prototype.createDom=function(){this.createAndAppendContent(),this.updateAppearance()},t.prototype.createAndAppendContent=function(){this.createAndAppendHeader(),this.createAndAppendSearch(),this.createAndAppendValues()},t.prototype.createAndAppendHeader=function(){var e=this;this.header=new y.DynamicFacetHeader({title:this.options.title,enableCollapse:this.options.enableCollapse,clear:function(){return e.clear()},toggleCollapse:function(){return e.toggleCollapse()},collapse:function(){return e.collapse()},expand:function(){return e.expand()}}),this.element.appendChild(this.header.element)},t.prototype.createAndAppendSearch=function(){!1!==this.options.enableFacetSearch&&(this.search=new R.DynamicFacetSearch(this),this.element.appendChild(this.search.element))},t.prototype.createAndAppendValues=function(){this.element.appendChild(this.values.render())},t.prototype.updateQueryStateModel=function(){this.listenToQueryStateChange=!1,this.queryStateModel.set(this.includedAttributeId,this.values.selectedValues),this.listenToQueryStateChange=!0},t.prototype.updateAppearance=function(){this.header.toggleClear(this.values.hasSelectedValues),this.header.toggleCollapse(this.isCollapsed),this.toggleSearchDisplay(),l.$$(this.element).toggleClass("coveo-dynamic-facet-collapsed",this.isCollapsed),l.$$(this.element).toggleClass("coveo-active",this.values.hasSelectedValues),l.$$(this.element).removeClass("coveo-hidden"),this.dependsOnManager.updateVisibilityBasedOnDependsOn(),!this.values.hasDisplayedValues&&l.$$(this.element).addClass("coveo-hidden")},t.prototype.toggleSearchDisplay=function(){!1!==this.options.enableFacetSearch&&(O.Utils.isUndefined(this.options.enableFacetSearch)&&l.$$(this.search.element).toggle(this.moreValuesAvailable),this.isCollapsed&&l.$$(this.search.element).toggle(!1))},t.prototype.triggerNewQuery=function(e){this.beforeSendingQuery();var t=e?{beforeExecuteQuery:e}:{ignoreWarningSearchEvent:!0};this.queryController.executeQuery(t)},t.prototype.triggerNewIsolatedQuery=function(e){return s(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:this.beforeSendingQuery(),e&&e(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.dynamicFacetQueryController.getQueryResults()];case 2:return t=i.sent(),this.handleQueryResults(t),[3,4];case 3:return n=i.sent(),this.header.hideLoading(),[3,4];case 4:return[2]}})})},t.prototype.beforeSendingQuery=function(){this.header.showLoading()},t.prototype.notImplementedError=function(){this.logger.error("DynamicFacets are not supported by your current search endpoint. Disabling this component."),this.disable(),this.updateAppearance()},t.prototype.verifyCollapsingConfiguration=function(){this.options.collapsedByDefault&&!this.options.enableCollapse&&this.logger.warn('The "collapsedByDefault" option is "true" while the "enableCollapse" is "false"')},t.prototype.logAnalyticsFacetShowMoreLess=function(e){this.usageAnalytics.logCustomEvent(e,this.basicAnalyticsFacetMeta,this.element)},t.prototype.clear=function(){var e=this;this.reset(),this.enableFreezeFacetOrderFlag(),this.scrollToTop(),this.triggerNewQuery(function(){return e.logClearAllToAnalytics()})},t.prototype.logClearAllToAnalytics=function(){this.logAnalyticsEvent(A.analyticsActionCauseList.dynamicFacetClearAll,this.basicAnalyticsFacetMeta)},t.ID="DynamicFacet",t.doExport=function(){return u.exportGlobally({DynamicFacet:t})},t.options=o({},d.ResponsiveFacetOptions,{id:p.ComponentOptions.buildStringOption({postProcessing:function(e,t){void 0===e&&(e="");var n=e.replace(/[^A-Za-z0-9-_@]+/g,"");return O.Utils.isNonEmptyString(n)?n.slice(0,59):t.field.slice(0,59)}}),title:p.ComponentOptions.buildLocalizedStringOption({localizedString:function(){return w.l("NoTitle")},section:"CommonOptions",priority:10}),field:p.ComponentOptions.buildFieldOption({required:!0,section:"CommonOptions"}),sortCriteria:p.ComponentOptions.buildStringOption({postProcessing:function(e){return T.isFacetSortCriteria(e)?e:void 0},section:"Sorting"}),numberOfValues:p.ComponentOptions.buildNumberOption({min:0,defaultValue:8,section:"CommonOptions"}),enableCollapse:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"Filtering"}),enableScrollToTop:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),enableMoreLess:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),enableFacetSearch:p.ComponentOptions.buildBooleanOption({section:"Filtering"}),useLeadingWildcardInFacetSearch:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"Filtering",depend:"enableFacetSearch"}),collapsedByDefault:p.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Filtering",depend:"enableCollapse"}),includeInBreadcrumb:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),numberOfValuesInBreadcrumb:p.ComponentOptions.buildNumberOption({defaultFunction:function(){return _.DeviceUtils.isMobileDevice()?3:5},min:0,depend:"includeInBreadcrumb",section:"CommonOptions"}),valueCaption:p.ComponentOptions.buildJsonOption({defaultValue:{}}),dependsOn:p.ComponentOptions.buildStringOption(),injectionDepth:p.ComponentOptions.buildNumberOption({defaultValue:1e3,min:0})}),t}(c.Component);t.DynamicFacet=x,h.Initialization.registerAutoCreateComponent(x),x.doExport()},117:function(module,exports,__webpack_require__){"use strict";function showOnlyWithHelper(e,t){return null==t&&(t={}),t.helpers=e,t}var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var underscore_1=__webpack_require__(0),GlobalExports_1=__webpack_require__(3),Assert_1=__webpack_require__(5),QueryStateModel_1=__webpack_require__(13),Strings_1=__webpack_require__(6),AccessibleButton_1=__webpack_require__(17),DateUtils_1=__webpack_require__(29),Dom_1=__webpack_require__(1),StringUtils_1=__webpack_require__(19),Utils_1=__webpack_require__(4),AnalyticsActionListMeta_1=__webpack_require__(10),Component_1=__webpack_require__(7),ComponentOptions_1=__webpack_require__(8),Initialization_1=__webpack_require__(2),DynamicFacet_1=__webpack_require__(114),FacetUtils_1=__webpack_require__(43),TemplateFieldsEvaluator_1=__webpack_require__(131),TemplateHelpers_1=__webpack_require__(113),FieldValue=function(_super){function FieldValue(e,t,n,i,o){void 0===o&&(o=FieldValue.ID);var s=_super.call(this,e,o,n)||this;return s.element=e,s.options=t,s.result=i,s.options=ComponentOptions_1.ComponentOptions.initOptions(e,FieldValue.simpleOptions,t,FieldValue.ID),null!=s.options.helper&&s.normalizeHelperAndOptions(),s.result=s.result||s.resolveResult(),Assert_1.Assert.exists(s.result),TemplateFieldsEvaluator_1.TemplateFieldsEvaluator.evaluateFieldsToMatch(s.options.conditions,s.result)&&s.getValue()?s.initialize():null!=s.element.parentElement&&s.element.parentElement.removeChild(s.element),s}return __extends(FieldValue,_super),FieldValue.prototype.initialize=function(){var e,t=this.getValue();underscore_1.isArray(t)?e=t:this.options.splitValues?underscore_1.isString(t)&&(e=underscore_1.map(t.split(this.options.separator),function(e){return e.trim()})):(t=t.toString(),e=[t]),this.appendValuesToDom(e),null!=this.options.textCaption&&this.prependTextCaptionToDom()},FieldValue.prototype.getValue=function(){var e=Utils_1.Utils.getFieldValue(this.result,this.options.field);return!underscore_1.isArray(e)&&underscore_1.isObject(e)&&(e=null),e},FieldValue.prototype.renderOneValue=function(e){var t=Dom_1.$$("span").el,n=FacetUtils_1.FacetUtils.tryToGetTranslatedCaption(this.options.field,e);if(this.options.helper){var i=TemplateHelpers_1.TemplateHelpers.getHelper(this.options.helper+"v2")||TemplateHelpers_1.TemplateHelpers.getHelper(""+this.options.helper);Utils_1.Utils.exists(i)?n=i.call(this,e,this.getHelperOptions()):this.logger.warn("Helper "+this.options.helper+" is not found in available helpers. The list of supported helpers is :",underscore_1.keys(TemplateHelpers_1.TemplateHelpers.getHelpers()));var o=this.getFullDate(e,this.options.helper);o&&t.setAttribute("title",o),"date"!=this.options.helper&&"dateTime"!=this.options.helper&&"emailDateTime"!=this.options.helper||(n=StringUtils_1.StringUtils.capitalizeFirstLetter(n))}return this.options.htmlValue?t.innerHTML=n:t.appendChild(document.createTextNode(n)),this.bindEventOnValue(t,e,n),t},FieldValue.prototype.getValueContainer=function(){return this.element},FieldValue.prototype.normalizeHelperAndOptions=function(){var e=this;this.options=ComponentOptions_1.ComponentOptions.initOptions(this.element,FieldValue.helperOptions,this.options,FieldValue.ID);var t=underscore_1.keys(FieldValue.options.helperOptions.subOptions),n=underscore_1.filter(t,function(t){var n=FieldValue.options.helperOptions.subOptions[t];if(n){var i=n.helpers;return null!=i&&underscore_1.contains(i,e.options.helper)}return!1});this.options.helperOptions=underscore_1.omit(this.options.helperOptions,function(e,t){return!underscore_1.contains(n,t)})},FieldValue.prototype.getHelperOptions=function(){var inlineOptions=ComponentOptions_1.ComponentOptions.loadStringOption(this.element,"helperOptions",{});return Utils_1.Utils.isNonEmptyString(inlineOptions)?underscore_1.extend({},this.options.helperOptions,eval("("+inlineOptions+")")):this.options.helperOptions},FieldValue.prototype.getFullDate=function(e,t){var n={useLongDateFormat:!0,useTodayYesterdayAndTomorrow:!1,useWeekdayIfThisWeek:!1,omitYearIfCurrentOne:!1};return"date"==t?DateUtils_1.DateUtils.dateToString(new Date(parseInt(e)),n):"dateTime"==t||"emailDateTime"==t?DateUtils_1.DateUtils.dateTimeToString(new Date(parseInt(e)),n):""},FieldValue.prototype.appendValuesToDom=function(e){var t=this;underscore_1.each(e,function(n,i){void 0!=n&&(t.getValueContainer().appendChild(t.renderOneValue(n)),i!==e.length-1&&t.getValueContainer().appendChild(document.createTextNode(t.options.displaySeparator)))})},FieldValue.prototype.renderTextCaption=function(){return Dom_1.$$("span",{className:"coveo-field-caption"},underscore_1.escape(this.options.textCaption)).el},FieldValue.prototype.prependTextCaptionToDom=function(){var e=this.getValueContainer();Dom_1.$$(e).prepend(this.renderTextCaption()),Dom_1.$$(e).addClass("coveo-with-label")},FieldValue.prototype.bindEventOnValue=function(e,t,n){this.bindFacets(e,t,n),this.bindDynamicFacets(e,t,n)},FieldValue.prototype.bindFacets=function(e,t,n){var i=this,o=QueryStateModel_1.QueryStateModel.getFacetId(this.options.facet),s=underscore_1.filter(this.componentStateModel.get(o),function(e){var t=!0,n=-1!==e.type.indexOf("Dynamic"),i=Component_1.Component.getComponentRef("FacetRange"),o=Component_1.Component.getComponentRef("FacetSlider");return!e.disabled&&!n&&(t&&i&&(t=!(e instanceof i)),t&&o&&(t=!(e instanceof o)),t)});if(s.length){var r=!!underscore_1.find(s,function(e){var n=e.values.get(t);return n&&n.selected}),a=function(){return i.handleFacetSelection(r,s,t)};this.buildClickableElement(e,!!r,n,a)}},FieldValue.prototype.getDynamicFacets=function(){var e=QueryStateModel_1.QueryStateModel.getFacetId(this.options.facet);return underscore_1.filter(this.componentStateModel.get(e),function(e){return e.type===DynamicFacet_1.DynamicFacet.ID&&!e.disabled})},FieldValue.prototype.bindDynamicFacets=function(e,t,n){var i=this,o=this.getDynamicFacets();if(o.length){var s=!!underscore_1.find(o,function(e){return e.values.hasSelectedValue(t)}),r=function(){return i.handleDynamicFacetSelection(s,o,t)};this.buildClickableElement(e,s,n,r)}},FieldValue.prototype.buildClickableElement=function(e,t,n,i){var o=t?Strings_1.l("RemoveFilterOn",n):Strings_1.l("FilterOn",n);(new AccessibleButton_1.AccessibleButton).withTitle(o).withLabel(o).withElement(e).withSelectAction(i).build(),t&&Dom_1.$$(e).addClass("coveo-selected"),Dom_1.$$(e).addClass("coveo-clickable")},FieldValue.prototype.handleFacetSelection=function(e,t,n){t.forEach(function(t){e?t.deselectValue(n):t.selectValue(n)}),this.executeQuery(n)},FieldValue.prototype.handleDynamicFacetSelection=function(e,t,n){t.forEach(function(t){e?t.deselectValue(n):t.selectValue(n)}),this.executeQuery(n)},FieldValue.prototype.executeQuery=function(e){var t=this;this.queryController.deferExecuteQuery({beforeExecuteQuery:function(){return t.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.documentField,{facetId:t.options.facet,facetField:t.options.field.toString(),facetValue:e.toLowerCase()})}})},FieldValue.ID="FieldValue",FieldValue.doExport=function(){GlobalExports_1.exportGlobally({FieldValue:FieldValue})},FieldValue.options={field:ComponentOptions_1.ComponentOptions.buildFieldOption({defaultValue:"@field",required:!0}),facet:ComponentOptions_1.ComponentOptions.buildStringOption({postProcessing:function(e,t){return e||t.field}}),htmlValue:ComponentOptions_1.ComponentOptions.buildBooleanOption({defaultValue:!1}),splitValues:ComponentOptions_1.ComponentOptions.buildBooleanOption({defaultValue:!1}),separator:ComponentOptions_1.ComponentOptions.buildStringOption({depend:"splitValues",defaultValue:";"}),displaySeparator:ComponentOptions_1.ComponentOptions.buildStringOption({depend:"splitValues",defaultValue:", "}),helper:ComponentOptions_1.ComponentOptions.buildHelperOption(),helperOptions:ComponentOptions_1.ComponentOptions.buildObjectOption({subOptions:{text:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),target:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),class:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),decimals:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["currency"],{min:0})),symbol:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["currency"])),useTodayYesterdayAndTomorrow:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),useWeekdayIfThisWeek:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),omitYearIfCurrentOne:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),useLongDateFormat:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!1})),includeTimeIfToday:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),includeTimeIfThisWeek:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),alwaysIncludeTime:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!1})),predefinedFormat:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"])),companyDomain:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["email"])),me:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["email"])),lengthLimit:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["email"],{min:1})),truncateName:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["email"])),alt:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),height:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),width:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),srcTemplate:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),precision:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["size"],{min:0,defaultValue:2})),base:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["size"],{min:0,defaultValue:0})),isMilliseconds:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["timeSpan"])),length:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["shorten","shortenPath","shortenUri"],{defaultValue:200}))}}),textCaption:ComponentOptions_1.ComponentOptions.buildLocalizedStringOption(),conditions:ComponentOptions_1.ComponentOptions.buildFieldConditionOption()},FieldValue.simpleOptions=underscore_1.omit(FieldValue.options,"helperOptions"),FieldValue.helperOptions={helperOptions:FieldValue.options.helperOptions},FieldValue}(Component_1.Component);exports.FieldValue=FieldValue,Initialization_1.Initialization.registerAutoCreateComponent(FieldValue)},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(110),o=function(){function e(){}return e.shouldDrawFacetSlider=function(e,t){return i.ResponsiveDropdownContent.isTargetInsideOpenedDropdown(t)||!this.isSmallFacetActivated(e)},e.isSmallTabsActivated=function(e){return e.hasClass(this.smallTabsClassName)},e.isSmallFacetActivated=function(e){return e.hasClass(this.smallFacetClassName)},e.isSmallRecommendationActivated=function(e){return e.hasClass(this.smallRecommendationClassName)},e.activateSmallTabs=function(e){e.addClass(this.smallTabsClassName)},e.deactivateSmallTabs=function(e){e.removeClass(this.smallTabsClassName)},e.activateSmallFacet=function(e){e.addClass(this.smallFacetClassName)},e.deactivateSmallFacet=function(e){e.removeClass(this.smallFacetClassName)},e.activateSmallRecommendation=function(e){e.addClass(this.smallRecommendationClassName)},e.deactivateSmallRecommendation=function(e){e.removeClass(this.smallRecommendationClassName)},e.smallTabsClassName="coveo-small-tabs",e.smallFacetClassName="coveo-small-facets",e.smallRecommendationClassName="coveo-small-recommendation",e}();t.ResponsiveComponentsUtils=o},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e.addClassToSVGInContainer=function(t,n){var i=t.querySelector("svg");i.setAttribute("class",""+e.getClass(i)+n)},e.removeClassFromSVGInContainer=function(t,n){var i=t.querySelector("svg");i.setAttribute("class",e.getClass(i).replace(n,""))},e.addStyleToSVGInContainer=function(e,t){var n=e.querySelector("svg");i.each(t,function(e,t){n.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=o},168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(23),s=n(15),r=n(49),a=function(){function e(e){var t=this;this.facet=e,this.facet.bind.onRootElement(o.QueryEvents.newQuery,function(){return t.handleNewQuery()}),this.updateVisibilityBasedOnDependsOn()}return e.prototype.listenToParentIfDependentFacet=function(){var e=this;this.isDependentFacet&&this.facet.bind.onQueryState(s.MODEL_EVENTS.CHANGE,void 0,function(){return e.resetIfParentFacetHasNoSelectedValues()})},e.prototype.updateVisibilityBasedOnDependsOn=function(){this.isDependentFacet&&o.$$(this.facet.element).toggleClass("coveo-hidden",!this.parentFacetHasSelectedValues)},Object.defineProperty(e.prototype,"dependentFacets",{get:function(){var e=this;return r.ComponentsTypes.getAllFacetsInstance(this.facet.root).filter(function(t){return e.facet.id===t.options.dependsOn})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDependentFacets",{get:function(){return!!this.dependentFacets.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dependentFacetsHaveSelectedValues",{get:function(){var e=this;return this.dependentFacets.some(function(t){return e.valuesExistForFacetWithId(t.options.id)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDependentFacet",{get:function(){return i.Utils.isNonEmptyString(this.facetDependsOnField)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facetDependsOnField",{get:function(){return this.facet.dependsOn},enumerable:!0,configurable:!0}),e.prototype.resetIfParentFacetHasNoSelectedValues=function(){this.parentFacetHasSelectedValues||this.facet.reset()},Object.defineProperty(e.prototype,"parentFacetHasSelectedValues",{get:function(){return this.valuesExistForFacetWithId(this.facetDependsOnField)},enumerable:!0,configurable:!0}),e.prototype.valuesExistForFacetWithId=function(e){var t=this.facet.queryStateModel.get(o.QueryStateModel.getFacetId(e));return null!=t&&0!=t.length},e.prototype.handleNewQuery=function(){var e=this;this.dependentFacets.forEach(function(t){e.facet.toggleDependentFacet(t)})},e}();t.DependsOnManager=a},169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.specific="specific",e.numericalRange="numericalRange",e.dateRange="dateRange",e.hierarchical="hierarchical"}(t.FacetType||(t.FacetType={}))},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(0),s=function(){function e(e,t){this.resultListOptions=e,this.autoCreateComponentsFn=t}return e.prototype.renderResults=function(e,t,n){var s=this;return void 0===t&&(t=!1),Promise.all([this.getStartFragment(e,t),this.getEndFragment(e,t)]).then(function(t){var r=t[0],a=t[1],l=document.createDocumentFragment();r&&l.appendChild(r),o.each(e,function(e){l.appendChild(e),n(i.Component.getResult(e),e)}),a&&l.appendChild(a),s.resultListOptions.resultsContainer.appendChild(l)})},e.prototype.getStartFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e.prototype.getEndFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e}();t.ResultListRenderer=s},203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(498);var i=n(11),o=n(9),s=n(6),r=n(1),a=n(4),l=n(7),u=n(18),c=n(51),p=n(58),h=n(124),d=n(116),f=n(110),m=n(130),y=n(0),g=n(49),v=function(){function e(e,t,n,i){this.coveoRoot=e,this.ID=t,this.componentsInFacetColumn=[],this.preservePositionOriginalValues=[],this.dropdownHeaderLabel=this.getDropdownHeaderLabel(),this.dropdown=this.buildDropdown(i),this.searchInterface=l.Component.get(this.coveoRoot.el,u.SearchInterface,!1),this.bindDropdownContentEvents(),this.registerOnCloseHandler(),this.registerQueryEvents(),this.breakpoint=n.responsiveBreakpoint}return e.init=function(t,n,i,o,s){this.findColumn(n)&&(p.ResponsiveComponentsManager.register(e,r.$$(n),"ResponsiveFacetColumn",i,o),p.ResponsiveComponentsManager.register(t,r.$$(n),s,i,o))},e.findColumn=function(e){var t=r.$$(e).find(".coveo-facet-column");if(!t){new o.Logger("ResponsiveFacets").info("No element with class coveo-facet-column. Responsive facets cannot be enabled")}return t},e.prototype.registerComponent=function(e){return this.componentsInFacetColumn.push(e),this.preservePositionOriginalValues.push(e.options.preservePosition),!0},e.prototype.needDropdownWrapper=function(){return this.needSmallMode()},e.prototype.handleResizeEvent=function(){this.needSmallMode()&&!h.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)?this.changeToSmallMode():!this.needSmallMode()&&h.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)&&this.changeToLargeMode(),this.dropdown.isOpened&&this.dropdown.dropdownContent.positionDropdown()},e.prototype.dismissFacetSearches=function(){y.each(this.componentsInFacetColumn,function(e){e.facetSearch&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.dismissSearchResults()})},e.prototype.needSmallMode=function(){if(!this.searchInterface)return this.coveoRoot.width()<=(a.Utils.isNullOrUndefined(this.breakpoint)?(new c.ResponsiveComponents).getMediumScreenWidth():this.breakpoint);switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"small":case"medium":return!0;case"auto":return this.coveoRoot.width()<=(a.Utils.isNullOrUndefined(this.breakpoint)?this.searchInterface.responsiveComponents.getMediumScreenWidth():this.breakpoint);default:return!1}},e.prototype.changeToSmallMode=function(){this.dropdown.close(),this.disableFacetPreservePosition(),r.$$(this.coveoRoot.find("."+p.ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS)).append(this.dropdown.dropdownHeader.element.el),h.ResponsiveComponentsUtils.activateSmallFacet(this.coveoRoot)},e.prototype.changeToLargeMode=function(){this.restoreFacetPreservePositionValue(),this.dropdown.cleanUp(),h.ResponsiveComponentsUtils.deactivateSmallFacet(this.coveoRoot)},e.prototype.buildDropdown=function(e){var t=this.buildDropdownContent(),n=this.buildDropdownHeader();return e||new d.ResponsiveDropdown(t,n,this.coveoRoot)},e.prototype.buildDropdownContent=function(){var t=r.$$(this.coveoRoot.find(".coveo-facet-column")),n=r.$$("div",{className:"coveo-facet-header-filter-by-container",style:"display: none"}),i=r.$$("div",{className:"coveo-facet-header-filter-by"});return i.text(s.l("Filter by:")),n.append(i.el),t.prepend(n.el),new f.ResponsiveDropdownContent("facet",t,this.coveoRoot,e.DROPDOWN_MIN_WIDTH,e.DROPDOWN_WIDTH_RATIO)},e.prototype.buildDropdownHeader=function(){var e=r.$$("a"),t=r.$$("p");return t.text(this.dropdownHeaderLabel),e.el.appendChild(t.el),new m.ResponsiveDropdownHeader("facet",e)},e.prototype.registerOnCloseHandler=function(){this.dropdown.registerOnCloseHandler(this.dismissFacetSearches,this)},e.prototype.registerQueryEvents=function(){var e=this;this.coveoRoot.on(i.QueryEvents.noResults,function(){return e.handleNoResults()}),this.coveoRoot.on(i.QueryEvents.querySuccess,function(t,n){return e.handleQuerySuccess(n)}),this.coveoRoot.on(i.QueryEvents.queryError,function(){return e.handleQueryError()})},e.prototype.bindDropdownContentEvents=function(){var t=this;this.dropdown.dropdownContent.element.on("scroll",y.debounce(function(){y.each(t.componentsInFacetColumn,function(e){var n=e.facetSearch;n&&n.currentlyDisplayedResults&&!t.isFacetSearchScrolledIntoView(n.search)?e.facetSearch.positionSearchResults(t.dropdown.dropdownContent.element.el):n&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.positionSearchResults()})},e.DEBOUNCE_SCROLL_WAIT))},e.prototype.restoreFacetPreservePositionValue=function(){var e=this;y.each(this.componentsInFacetColumn,function(t,n){t.options&&(t.options.preservePosition=e.preservePositionOriginalValues[n])})},e.prototype.disableFacetPreservePosition=function(){y.each(this.componentsInFacetColumn,function(e){e.options&&(e.options.preservePosition=!1)})},e.prototype.isFacetSearchScrolledIntoView=function(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom,i=this.dropdown.dropdownContent.element.el.getBoundingClientRect().top,o=this.dropdown.dropdownContent.element.el.getBoundingClientRect().bottom;return i=i>=0?i:0,t>=i&&n<=o},e.prototype.getDropdownHeaderLabel=function(){var t;return g.ComponentsTypes.getAllFacetsInstance(this.coveoRoot.find(".coveo-facet-column")).forEach(function(e){var n=e.options;!t&&n.dropdownHeaderLabel&&(t=n.dropdownHeaderLabel)}),t||(t=s.l(e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE)),t},e.prototype.handleNoResults=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQueryError=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQuerySuccess=function(e){0===e.results.totalCount?this.dropdown.dropdownHeader.hide():this.dropdown.dropdownHeader.show()},e.DEBOUNCE_SCROLL_WAIT=250,e.DROPDOWN_MIN_WIDTH=280,e.DROPDOWN_WIDTH_RATIO=.35,e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE="Filters",e}();t.ResponsiveFacetColumn=v},204:function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),s=n(64),r=n(10),a=n(6),l=n(169),u=function(){function e(e,t,n){this.facet=t,this.preventAutoSelect=!1,this.element=null,this.value=e.value,this.start=e.start,this.end=e.end,this.endInclusive=e.endInclusive,this.state=e.state,this.numberOfResults=e.numberOfResults,this.position=e.position,this.displayValue=e.displayValue,this.renderer=new n(this,t)}return Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.state===s.FacetValueState.selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdle",{get:function(){return this.state===s.FacetValueState.idle},enumerable:!0,configurable:!0}),e.prototype.toggleSelect=function(){this.state===s.FacetValueState.selected?this.deselect():this.select()},e.prototype.select=function(){this.state=s.FacetValueState.selected},e.prototype.deselect=function(){this.state=s.FacetValueState.idle,this.preventAutoSelect=!0},e.prototype.equals=function(e){return("string"==typeof e?e:e.value).toLowerCase()===this.value.toLowerCase()},Object.defineProperty(e.prototype,"formattedCount",{get:function(){return o.format(this.numberOfResults,"n0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectAriaLabel",{get:function(){var e=this.isSelected?"UnselectValueWithResultCount":"SelectValueWithResultCount",t=a.l("ResultCount",this.formattedCount,this.numberOfResults);return""+a.l(e,this.displayValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRange",{get:function(){return this.facet.facetType!==l.FacetType.specific},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsValue",{get:function(){return this.isRange?this.start+".."+this.end:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetState",{get:function(){return this.isRange?{start:""+this.start,end:""+this.end,endInclusive:this.endInclusive}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsFacetState",{get:function(){return i({},this.facet.basicAnalyticsFacetState,this.rangeFacetState,{value:this.analyticsValue,valuePosition:this.position,displayValue:this.displayValue,state:this.state})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetMeta",{get:function(){return this.isRange?{facetRangeStart:""+this.start,facetRangeEnd:""+this.end,facetRangeEndInclusive:this.endInclusive}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsFacetMeta",{get:function(){return i({},this.facet.basicAnalyticsFacetMeta,this.rangeFacetMeta,{facetValue:this.analyticsValue})},enumerable:!0,configurable:!0}),e.prototype.logSelectActionToAnalytics=function(){var e=this.state===s.FacetValueState.selected?r.analyticsActionCauseList.dynamicFacetSelect:r.analyticsActionCauseList.dynamicFacetDeselect;this.facet.logAnalyticsEvent(e,this.analyticsFacetMeta)},e.prototype.render=function(){return this.element=this.renderer.render(),this.element},Object.defineProperty(e.prototype,"renderedElement",{get:function(){return this.element?this.element:this.render()},enumerable:!0,configurable:!0}),e}();t.DynamicFacetValue=u},206:function(e,t){},207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e){var t=i.$$("button",{className:e.className,ariaLabel:e.ariaLabel},e.label);this.element=i.$$("li",null,t).el,t.on("click",function(){return e.action()})}return e}();t.DynamicFacetValueShowMoreLessButton=o},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=n(21),s=n(111),r=n(29),a=n(4),l=n(1),u=n(0),c=n(6),p=function(){function e(){}return e.getRegexToUseForFacetSearch=function(e,t){return new RegExp(i.StringUtils.stringToRegex(e,t),"i")},e.getDisplayValueFromValueCaption=function(e,t,n){var i=this.tryToGetTranslatedCaption(t,e);return n[e]||i},e.getValuesToUseForSearchInFacet=function(e,t){var n=[e],i=this.getRegexToUseForFacetSearch(e,t.options.facetSearchIgnoreAccents);return t.options.valueCaption?(u.chain(t.options.valueCaption).pairs().filter(function(e){return i.test(e[1])}).each(function(e){n.push(e[0])}),(o.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||o.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype"))&&u.each(s.FileTypes.getFileTypeCaptions(),function(e,o){o in t.options.valueCaption||!i.test(e)||n.push(o)})):o.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||o.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype")?u.each(u.filter(u.pairs(s.FileTypes.getFileTypeCaptions()),function(e){return i.test(e[1])}),function(e){n.push(e[0])}):o.QueryUtils.isStratusAgnosticField(t.options.field,"@month")&&u.each(u.range(1,13),function(e){i.test(r.DateUtils.monthToString(e-1))&&n.push(("0"+e.toString()).substr(-2))}),n},e.buildFacetSearchPattern=function(e){return e=u.map(e,function(e){return a.Utils.escapeRegexCharacter(e)}),e[0]=".*"+e[0]+".*",e.join("|")},e.needAnotherFacetSearch=function(e,t,n,i){return e<t&&e<i&&e>n},e.addNoStateCssClassToFacetValues=function(e,t){if(0!=e.values.getSelected().length){var n=l.$$(t).findAll("li:not(.coveo-selected)");u.each(n,function(e){l.$$(e).addClass("coveo-no-state")})}},e.tryToGetTranslatedCaption=function(t,n){var i;if(o.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@filetype"))i=s.FileTypes.getFileType(n).caption;else if(o.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@objecttype"))i=s.FileTypes.getObjectType(n).caption;else if(e.isMonthFieldValue(t,n)){var l=parseInt(n,10);i=r.DateUtils.monthToString(l-1)}else i=c.l(n);return void 0!=i&&a.Utils.isNonEmptyString(i)?i:n},e.isMonthFieldValue=function(e,t){if(!o.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@month"))return!1;var n=parseInt(t,10);return!isNaN(n)&&!(n<1||n>12)},e}();t.FacetUtils=p},438:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=n(88),r=n(0),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultTemplate='<td><a class="CoveoResultLink"></a></td>\n                             <td><span class="CoveoExcerpt"></span></td>\n                             <td><span class="CoveoFieldValue" data-field="@date" data-helper="date"></span></td>',t.defaultRoledTemplates={"table-header":'<th style="width: 40%">Link</th>\n                     <th>Excerpt</th>\n                     <th style="width: 20%"\n                         class="CoveoSort coveo-table-header-sort"\n                         data-sort-criteria="date ascending,date descending"\n                         data-display-unselected-icon="false">Date</th>',"table-footer":"<th>Link</th>\n                     <th>Excerpt</th>\n                     <th>Date</th>"},t}return i(t,e),t.prototype.instantiateRoleToString=function(e){var t=r.find(this.templates,function(t){return t.role===e});return t?t.instantiateToString(void 0,{}):this.defaultRoledTemplates[e]},t.prototype.instantiateRoleToElement=function(e){var t=this,n=r.find(this.templates,function(t){return t.role===e});if(n)return n.instantiateToElement(void 0,{});var i=new o.Template(function(){return t.defaultRoledTemplates[e]});return i.layout="table",i.instantiateToElement(void 0)},t.prototype.getFallbackTemplate=function(){var e=this;return new o.Template(function(){return e.defaultTemplate})},t.prototype.hasTemplateWithRole=function(e){return r.find(this.templates,function(t){return t.role===e})},t}(s.TemplateList);t.TableTemplate=a},439:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-result-frame">\n        <div class="coveo-result-row">\n          <div class="coveo-result-cell" style="width:40px;text-align:center;vertical-align:middle;">\n            <span class="CoveoIcon" data-small="true" data-with-label="false">\n            </span>\n          </div>\n          <div class="coveo-result-cell" style="padding:0 0 3px 5px;vertical-align:middle">\n            <div class="coveo-result-row">\n              <div class="coveo-result-cell" style="font-size:10pt;">\n                <a class="CoveoResultLink" style="display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>'},t.prototype.instantiateToElement=function(e){var t=this;return new Promise(function(n,i){var o=document.createElement("div");o.innerHTML=t.instantiateToString(e),n(o)})},t}(o.Template);t.DefaultRecommendationTemplate=s},440:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,a)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),r=n(87),a=n(0),l=n(1),u=n(9),c=function(){function e(e){this.args=e}return e.prototype.buildResults=function(e,t,n){return i(this,void 0,void 0,function(){var i,s,l=this;return o(this,function(o){return i=[],s=a.map(e.results,function(e,o){return l.buildResult(e,t,n).then(function(e){return null!=e&&i.push({elem:e,idx:o}),r.ResultList.resultCurrentlyBeingRendered=null,e})}),[2,Promise.all(s).then(function(){return a.pluck(a.sortBy(i,"idx"),"elem")})]})})},e.prototype.buildResult=function(e,t,n){return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:return s.Assert.exists(e),s.QueryUtils.setStateObjectOnQueryResult(this.args.queryStateModel.get(),e),s.QueryUtils.setSearchInterfaceObjectOnQueryResult(this.args.searchInterface,e),r.ResultList.resultCurrentlyBeingRendered=e,[4,this.createHtmlElement(e,t)];case 1:return i=o.sent(),null!=i&&s.Component.bindResultToElement(i,e),n.push(e),[4,this.autoCreateComponentsInsideResult(i,e).initResult];case 2:return o.sent(),this.verifyChildren(i),[2,i]}})})},e.prototype.autoCreateComponentsInsideResult=function(e,t){return s.Assert.exists(e),s.Initialization.automaticallyCreateComponentsInsideResult(e,t)},e.prototype.createHtmlElement=function(e,t){return this.args.resultTemplate.instantiateToElement(e,{wrapInDiv:!0,checkCondition:!0,currentLayout:t,responsiveComponents:this.args.searchInterface.responsiveComponents})},e.prototype.verifyChildren=function(e){l.$$(e).find(".CoveoResultLink")||new u.Logger(e).warn('Result does not contain a "CoveoResultLink" component, please verify the result template',this.args.resultTemplate)},e}();t.TemplateToHtml=c},441:function(e,t,n){"use strict";function i(){var e,t=w.Component.getComponentRef("ResultList");if(t&&(e=t.resultCurrentlyBeingRendered),!e){var n=w.Component.getComponentRef("Quickview");n&&(e=n.resultCurrentlyBeingRendered)}return e}function o(){var e=i();if(e)return e.termsToHighlight}function s(){var e=i();if(e)return e.phrasesToHighlight}function r(e,t){return d.Utils.isNonEmptyArray(T.keys(e))||d.Utils.isNonEmptyArray(T.keys(t))}var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(113),u=n(66),c=n(29),p=n(129),h=n(174),d=n(4),f=n(19),m=n(68),y=n(173),g=n(21),v=n(22),b=n(1),C=n(50),O=n(112),S=n(43),F=n(20),T=n(0),w=n(7),_=n(65),V=function(){function e(){}return e.exportAllHelpersGlobally=function(e){T.each(l.TemplateHelpers.getHelpers(),function(t,n){void 0==e[n]&&(e[n]=t)})},e}();t.CoreHelpers=V,l.TemplateHelpers.registerFieldHelper("javascriptEncode",function(e){return d.Utils.exists(e)?f.StringUtils.javascriptEncode(e):void 0});var A=function(e,t){var n=u.StringAndHoles.shortenString(e,t.length,"...");return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shorten",function(e,t,n,i){return A(e,{length:t,highlights:n,cssClass:i})}),l.TemplateHelpers.registerTemplateHelper("shortenv2",function(e,t){return A(e,t)});var R=function(e,t){var n=u.StringAndHoles.shortenPath(e,t.length);return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shortenPath",function(e,t,n,i){return R(e,{length:t,highlights:n,cssClass:i})}),l.TemplateHelpers.registerFieldHelper("shortenPathv2",function(e,t){return R(e,t)});var D=function(e,t){var n=u.StringAndHoles.shortenUri(e,t.length);return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shortenUri",function(e,t,n,i){return D(e,{length:t,highlights:n,cssClass:i})}),l.TemplateHelpers.registerTemplateHelper("shortenUriv2",function(e,t){return D(e,t)});var E=function(e,t){return d.Utils.exists(e)?d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(e,t.highlights,null,t.cssClass||"highlight"):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlight",function(e,t,n){return E(e,{highlights:t,cssClass:n})}),l.TemplateHelpers.registerTemplateHelper("highlightv2",function(e,t){return E(e,t)});var $=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?O.StreamHighlightUtils.highlightStreamText(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlightStreamText",function(e,t,n,i){return void 0===t&&(t=o()),void 0===n&&(n=s()),$(e,{termsToHighlight:t,phrasesToHighlight:n,opts:i})}),l.TemplateHelpers.registerTemplateHelper("highlightStreamTextv2",function(e,t){var n=a({termsToHighlight:o(),phrasesToHighlight:s()},t);return $(e,n)});var I=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?O.StreamHighlightUtils.highlightStreamHTML(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlightStreamHTML",function(e,t,n,i){return void 0===t&&(t=o()),void 0===n&&(n=s()),I(e,{termsToHighlight:t,phrasesToHighlight:n,opts:i})}),l.TemplateHelpers.registerTemplateHelper("highlightStreamHTMLv2",function(e,t){return I(e,t)}),l.TemplateHelpers.registerFieldHelper("number",function(e,t){var n=Number(e);return d.Utils.exists(e)?T.isString(t)?f.StringUtils.htmlEncode(F.format(n,t)):f.StringUtils.htmlEncode(n.toString()):void 0}),l.TemplateHelpers.registerFieldHelper("date",function(e,t){return c.DateUtils.dateToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("time",function(e,t){return c.DateUtils.timeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("dateTime",function(e,t){return c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("emailDateTime",function(e,t){var n={};n.includeTimeIfThisWeek=!0;var i=T.extend(t,n);return e?c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),i):void 0}),l.TemplateHelpers.registerFieldHelper("currency",function(e,t){return p.CurrencyUtils.currencyToString(e,t)}),l.TemplateHelpers.registerFieldHelper("timeSpan",function(e,t){return void 0===t&&(t={isMilliseconds:!1}),new m.TimeSpan(e,t.isMilliseconds).getHHMMSS()}),l.TemplateHelpers.registerFieldHelper("email",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o,s,r;if(T.isObject(t[0])?(i=t[0].companyDomain,o=t[0].me,s=t[0].lengthLimit,r=t[0].truncateName):(i=t[0],o=t[1],s=t[2],r=t[3]),void 0==s&&(s=2),void 0==r&&(r=!1),T.isString(e)){var a=y.EmailUtils.splitSemicolonSeparatedListOfEmailAddresses(e);return y.EmailUtils.emailAddressesToHyperlinks(a,i,o,s,r)}return T.isArray(e)?y.EmailUtils.emailAddressesToHyperlinks(e,i,o,s,r):void 0}),l.TemplateHelpers.registerTemplateHelper("excessEmailToggle",function(e){b.$$(e).removeClass("coveo-active"),b.$$(e).hasClass("coveo-emails-excess-collapsed")?T.each(b.$$(e).siblings(".coveo-emails-excess-expanded"),function(e){b.$$(e).addClass("coveo-active")}):b.$$(e).hasClass("coveo-hide-expanded")&&(b.$$(e.parentElement).addClass("coveo-inactive"),T.each(b.$$(e.parentElement).siblings(".coveo-emails-excess-collapsed"),function(e){b.$$(e).addClass("coveo-active")}))}),l.TemplateHelpers.registerFieldHelper("anchor",function(e,t){return h.AnchorUtils.buildAnchor(e,t)}),l.TemplateHelpers.registerFieldHelper("image",function(e,t,n){return void 0===n&&(n=i()),t&&t.srcTemplate?h.ImageUtils.buildImage(f.StringUtils.buildStringTemplateFromResult(t.srcTemplate,n),{alt:t.alt,height:t.height,width:t.width}):h.ImageUtils.buildImage(e,t)}),l.TemplateHelpers.registerTemplateHelper("thumbnail",function(e,t,n){if(void 0===e&&(e=i()),void 0===t&&(t="default"),g.QueryUtils.hasThumbnail(e))return h.ImageUtils.buildImageFromResult(e,C.SearchEndpoint.endpoints[t],n)}),l.TemplateHelpers.registerTemplateHelper("fromFileTypeToIcon",function(e,t){void 0===e&&(e=i()),void 0===t&&(t={});var n=w.Component.getComponentRef("Icon");if(n)return n.createIcon(e,t).outerHTML}),l.TemplateHelpers.registerTemplateHelper("attrEncode",function(e){return(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/'/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),l.TemplateHelpers.registerTemplateHelper("loadTemplates",function(e,t){void 0===t&&(t=!0);var n,o="",s=i(),r=!1,a=e;return T.each(e,function(e,t,i){"default"==e&&(n=t)}),void 0!=n&&(a=T.omit(e,n)),T.each(a,function(e,n,i){r&&t||(r=r||e,o+=l.TemplateHelpers.getHelper("loadTemplate")(n,e,s))}),r||void 0==n||(o+=l.TemplateHelpers.getHelper("loadTemplate")(n,!0,s)),o});var x=["B","KB","MB","GB","TB","PB","EB"];l.TemplateHelpers.registerFieldHelper("size",function(e,t){for(var n=parseInt(e,10),i=null!=t&&null!=t.precision?t.precision:2,o=null!=t&&null!=t.base?t.base:0;n>1024&&o+1<x.length;)n/=1024,o++;return(n=Math.floor(n*Math.pow(10,i))/Math.pow(10,i))+" "+x[o]}),l.TemplateHelpers.registerFieldHelper("translatedCaption",function(e){return S.FacetUtils.tryToGetTranslatedCaption("@filetype",e)}),l.TemplateHelpers.registerTemplateHelper("loadTemplate",function(e,t,n){return void 0===t&&(t=!0),d.Utils.isNullOrUndefined(n)&&(n=i()),t?_.TemplateCache.getTemplate(e).instantiateToString(n,{checkCondition:!1}):""}),l.TemplateHelpers.registerTemplateHelper("encodeCarriageReturn",function(e){return d.Utils.isNullOrUndefined(e)?void 0:f.StringUtils.encodeCarriageReturn(e)}),l.TemplateHelpers.registerTemplateHelper("isMobileDevice",function(){return v.DeviceUtils.isMobileDevice()?v.DeviceUtils.getDeviceName():null})},442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(14),s=function(){function e(e){this.rootOptions=e,this.create()}return e.prototype.create=function(){var e=this.rootOptions.iconSVG&&this.rootOptions.iconClassName;this.button=i.$$("button",{className:("coveo-dynamic-facet-header-btn "+(this.rootOptions.className||"")).trim()},e?this.rootOptions.iconSVG:this.rootOptions.label),this.rootOptions.action&&this.button.on("click",this.rootOptions.action),e&&(this.button.setAttribute("aria-label",this.rootOptions.label),this.button.setAttribute("title",this.rootOptions.label),o.SVGDom.addClassToSVGInContainer(this.button.el,this.rootOptions.iconClassName)),this.rootOptions.ariaLabel&&this.button.setAttribute("aria-label",this.rootOptions.ariaLabel),void 0!==this.rootOptions.shouldDisplay&&this.toggle(this.rootOptions.shouldDisplay),this.element=this.button.el},e.prototype.toggle=function(e){this.button.toggle(e)},e}();t.DynamicFacetHeaderButton=s},443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(61),o=n(1),s=function(){function e(e,t){void 0===t&&(t=function(){}),this.facetValue=e,this.checkbox=new i.Checkbox(t.bind(this),this.facetValue.displayValue,this.facetValue.selectAriaLabel,"("+this.facetValue.formattedCount+")");var n=o.$$(this.checkbox.getElement()).find(".coveo-checkbox-span-label"),s=o.$$(this.checkbox.getElement()).find(".coveo-checkbox-span-label-suffix");n&&s&&(n.setAttribute("title",this.facetValue.displayValue),n.setAttribute("aria-hidden","true"),s.setAttribute("aria-hidden","true")),this.facetValue.isSelected&&this.checkbox.select(!1),this.element=this.checkbox.getElement()}return e}();t.DynamicFacetValueCheckbox=s},444:function(e,t){},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(499);var i=n(1),o=n(6),s=n(12),r=n(14),a=n(442),l=n(500),u=function(){function e(e){this.options=e,this.element=i.$$("div",{className:"coveo-dynamic-facet-header"}).el,this.title=this.createTitle(),i.$$(this.element).append(this.title.el),i.$$(this.element).append(this.createWaitAnimation()),i.$$(this.element).append(this.createClearButton()),this.options.enableCollapse&&this.enableCollapse()}return e.prototype.createClearButton=function(){var e=this;return this.clearButton=new a.DynamicFacetHeaderButton({label:o.l("Clear"),ariaLabel:o.l("Clear",this.options.title),className:"coveo-dynamic-facet-header-clear",shouldDisplay:!1,action:function(){return e.options.clear()}}),this.clearButton.element},e.prototype.createCollapseToggle=function(){return this.collapseToggle=new l.DynamicFacetHeaderCollapseToggle(this.options),this.collapseToggle.element},e.prototype.enableCollapse=function(){var e=this;i.$$(this.element).append(this.createCollapseToggle()),i.$$(this.title).addClass("coveo-clickable"),i.$$(this.title).on("click",function(){return e.options.toggleCollapse()})},e.prototype.toggleCollapse=function(e){this.options.enableCollapse&&this.collapseToggle.toggleButtons(e)},e.prototype.createTitle=function(){return i.$$("h2",{className:"coveo-dynamic-facet-header-title",ariaLabel:""+o.l("FacetTitle",this.options.title)},i.$$("span",{ariaHidden:!0,title:this.options.title},this.options.title))},e.prototype.createWaitAnimation=function(){return this.waitAnimation=i.$$("div",{className:"coveo-dynamic-facet-header-wait-animation"},s.SVGIcons.icons.loading),r.SVGDom.addClassToSVGInContainer(this.waitAnimation.el,"coveo-dynamic-facet-header-wait-animation-svg"),this.waitAnimation.toggle(!1),this.waitAnimation.el},e.prototype.toggleClear=function(e){this.clearButton.toggle(e)},e.prototype.showLoading=function(){var t=this;clearTimeout(this.showLoadingTimeout),this.showLoadingTimeout=window.setTimeout(function(){return t.waitAnimation.toggle(!0)},e.showLoadingDelay)},e.prototype.hideLoading=function(){clearTimeout(this.showLoadingTimeout),this.waitAnimation.toggle(!1)},e.showLoadingDelay=2e3,e}();t.DynamicFacetHeader=u},446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(504);var i=n(1),o=n(0),s=n(64),r=n(6),a=n(207),l=function(){function e(e,t){this.facet=e,this.list=i.$$("ul",{className:"coveo-dynamic-facet-values"}).el,this.resetValues(),this.valueCreator=new t(this.facet)}return e.prototype.createFromResponse=function(e){var t=this;this.facetValues=e.values.map(function(e,n){return t.valueCreator.createFromResponse(e,n)})},e.prototype.createFromRanges=function(e){var t=this;this.facetValues=e.map(function(e,n){return t.valueCreator.createFromRange(e,n)}).filter(function(e){return!!e})},e.prototype.resetValues=function(){this.facetValues=[]},Object.defineProperty(e.prototype,"allFacetValues",{get:function(){return this.facetValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allValues",{get:function(){return this.facetValues.map(function(e){return e.value})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValues",{get:function(){return this.facetValues.filter(function(e){return e.isSelected}).map(function(e){return e.value})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeValues",{get:function(){return this.facetValues.filter(function(e){return!e.isIdle})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedValues",{get:function(){return this.facetValues.filter(function(e){return!e.isIdle||e.numberOfResults>0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSelectedValues",{get:function(){return!!o.findWhere(this.facetValues,{state:s.FacetValueState.selected})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasActiveValues",{get:function(){return!!this.activeValues.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasIdleValues",{get:function(){return!!o.findWhere(this.facetValues,{state:s.FacetValueState.idle})},enumerable:!0,configurable:!0}),e.prototype.clearAll=function(){this.facetValues.forEach(function(e){return e.deselect()})},Object.defineProperty(e.prototype,"hasValues",{get:function(){return!!this.allFacetValues.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDisplayedValues",{get:function(){return!!this.displayedValues.length},enumerable:!0,configurable:!0}),e.prototype.hasSelectedValue=function(e){var t="string"==typeof e?e:e.value,n=o.find(this.facetValues,function(e){return e.equals(t)});return n&&n.isSelected},e.prototype.get=function(e){var t="string"==typeof e?e:e.value,n=o.find(this.facetValues,function(e){return e.equals(t)});if(n)return n;var i=this.valueCreator.createFromValue(t);return i?(this.facetValues.push(i),i):null},e.prototype.buildShowLess=function(){var e=this;return new a.DynamicFacetValueShowMoreLessButton({className:"coveo-dynamic-facet-show-less",ariaLabel:r.l("ShowLessFacetResults",this.facet.options.title),label:r.l("ShowLess"),action:function(){e.facet.enableFreezeFacetOrderFlag(),e.facet.showLessValues()}}).element},e.prototype.buildShowMore=function(){var e=this;return new a.DynamicFacetValueShowMoreLessButton({className:"coveo-dynamic-facet-show-more",ariaLabel:r.l("ShowMoreFacetResults",this.facet.options.title),label:r.l("ShowMore"),action:function(){e.facet.enableFreezeFacetOrderFlag(),e.facet.showMoreValues()}}).element},Object.defineProperty(e.prototype,"shouldEnableShowLess",{get:function(){return this.facetValues.length>this.facet.options.numberOfValues&&this.hasIdleValues},enumerable:!0,configurable:!0}),e.prototype.appendShowMoreLess=function(e){this.facet.options.enableMoreLess&&(this.shouldEnableShowLess&&e.appendChild(this.buildShowLess()),this.facet.moreValuesAvailable&&e.appendChild(this.buildShowMore()))},e.prototype.render=function(){var e=document.createDocumentFragment();return i.$$(this.list).empty(),this.displayedValues.forEach(function(t){e.appendChild(t.renderedElement)}),this.appendShowMoreLess(e),this.list.appendChild(e),this.list},e}();t.DynamicFacetValues=l},447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=n(11),s=n(0),r=function(){function e(e){this.facet=e,this.freezeCurrentValues=!1,this.freezeFacetOrder=!1,this.resetNumberOfValuesToRequest(),this.resetFreezeCurrentValuesDuringQuery()}return e.prototype.resetFreezeCurrentValuesDuringQuery=function(){var e=this;this.facet.bind.onRootElement(o.QueryEvents.duringQuery,function(){e.freezeCurrentValues=!1,e.freezeFacetOrder=!1})},e.prototype.increaseNumberOfValuesToRequest=function(e){this.numberOfValuesToRequest+=e},e.prototype.resetNumberOfValuesToRequest=function(){this.numberOfValuesToRequest=this.facet.options.numberOfValues},e.prototype.enableFreezeCurrentValuesFlag=function(){this.areValuesIncorrectlyAffectedByDependsOn||(this.freezeCurrentValues=!0)},e.prototype.enableFreezeFacetOrderFlag=function(){this.freezeFacetOrder=!0},Object.defineProperty(e.prototype,"areValuesIncorrectlyAffectedByDependsOn",{get:function(){return!!this.facet.dependsOnManager.hasDependentFacets&&(!this.facet.dependsOnManager.dependentFacetsHaveSelectedValues&&this.currentValues.length<this.numberOfValuesToRequest)},enumerable:!0,configurable:!0}),e.prototype.putFacetIntoQueryBuilder=function(e){i.Assert.exists(e),e.facetRequests.push(this.facetRequest),this.freezeFacetOrder&&(e.facetOptions.freezeFacetOrder=!0)},Object.defineProperty(e.prototype,"facetRequest",{get:function(){return{facetId:this.facet.options.id,field:this.facet.fieldName,type:this.facet.facetType,sortCriteria:this.facet.options.sortCriteria,currentValues:this.currentValues,numberOfValues:this.numberOfValues,freezeCurrentValues:this.freezeCurrentValues,isFieldExpanded:this.numberOfValuesToRequest>this.facet.options.numberOfValues,injectionDepth:this.facet.options.injectionDepth}},enumerable:!0,configurable:!0}),e.prototype.getQueryResults=function(){var e=this.facet.queryController.getLastQuery();e.numberOfResults=0;var t=s.findIndex(e.facets,{facetId:this.facet.options.id});return-1!==t?e.facets[t]=this.facetRequest:e.facets?e.facets.push(this.facetRequest):e.facets=[this.facetRequest],this.facet.queryController.getEndpoint().search(e)},Object.defineProperty(e.prototype,"currentValues",{get:function(){return this.facet.values.allFacetValues.map(function(e){return{value:e.value,state:e.state,preventAutoSelect:e.preventAutoSelect}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfValues",{get:function(){return this.freezeCurrentValues?this.currentValues.length:Math.max(this.numberOfValuesToRequest,this.facet.values.activeValues.length)},enumerable:!0,configurable:!0}),e}();t.DynamicFacetQueryController=r},448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(443),s=function(){function e(e,t){this.facetValue=e,this.facet=t}return e.prototype.render=function(){return this.dom=i.$$("li",{className:"coveo-dynamic-facet-value",dataValue:this.facetValue.value}),this.toggleSelectedClass(),this.renderCheckbox(),this.addFocusAndBlurEventListeners(),this.dom.el},e.prototype.toggleSelectedClass=function(){this.dom.toggleClass("coveo-selected",this.facetValue.isSelected)},e.prototype.renderCheckbox=function(){this.valueCheckbox=new o.DynamicFacetValueCheckbox(this.facetValue,this.selectAction.bind(this)),this.dom.append(this.valueCheckbox.element)},e.prototype.addFocusAndBlurEventListeners=function(){var e=this,t=i.$$(this.valueCheckbox.element).find("button");i.$$(t).on("focusin",function(){return e.onFocusIn()}),i.$$(t).on("focusout",function(){return e.onFocusOut()})},e.prototype.onFocusIn=function(){this.dom.addClass("coveo-focused")},e.prototype.onFocusOut=function(){this.dom.removeClass("coveo-focused")},e.prototype.selectAction=function(){var e=this;this.facet.toggleSelectValue(this.facetValue.value),this.toggleSelectedClass(),this.facet.enableFreezeCurrentValuesFlag(),this.facet.enableFreezeFacetOrderFlag(),this.facet.scrollToTop(),this.facet.triggerNewQuery(function(){return e.facetValue.logSelectActionToAnalytics()})},e}();t.DynamicFacetValueRenderer=s},491:function(e,t){},492:function(e,t){},493:function(e,t){},494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58),o=n(18),s=n(87),r=n(1),a=n(7),l=n(9),u=function(){function e(e,t,n,i){this.coveoRoot=e,this.ID=t,this.searchInterface=a.Component.get(this.coveoRoot.el,o.SearchInterface,!1),this.currentMode="large"}return e.init=function(t,n,o){if(!r.$$(t).find("."+a.Component.computeCssClassName(s.ResultList))){return void new l.Logger("ResponsiveDefaultResultTemplate").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}i.ResponsiveComponentsManager.register(e,r.$$(t),s.ResultList.ID,n,o)},e.prototype.registerComponent=function(e){return e instanceof s.ResultList&&(this.resultList=e,!0)},e.prototype.handleResizeEvent=function(){var e=this,t=this.resultList.queryController.getLastResults();this.needSmallMode()?(r.$$(this.resultList.options.resultsContainer).addClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultsContainer).removeClass("coveo-list-layout-container"),"small"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="small")):(r.$$(this.resultList.options.resultsContainer).removeClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultsContainer).addClass("coveo-list-layout-container"),"large"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="large"))},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},e}();t.ResponsiveDefaultResultTemplate=u},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e,t){this.searchInterface=t,this.resultContainerElement=i.$$(e)}return e.prototype.empty=function(){this.searchInterface.detachComponentsInside(this.resultContainerElement.el),i.$$(this.resultContainerElement).empty()},e.prototype.addClass=function(e){this.resultContainerElement.addClass(e)},e.prototype.isEmpty=function(){return this.resultContainerElement.isEmpty()},e.prototype.hideChildren=function(){this.resultContainerElement.children().forEach(function(e){return i.$$(e).hide()})},e.prototype.getResultElements=function(){return this.resultContainerElement.findAll(".CoveoResult")},Object.defineProperty(e.prototype,"el",{get:function(){return this.resultContainerElement.el},enumerable:!0,configurable:!0}),e.resultCurrentlyBeingRendered=null,e}();t.ResultContainer=o},496:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(202),s=n(1),r=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getEndFragment=function(e){var t=this;return new Promise(function(n){if(!r.isEmpty(e)){if(t.resultListOptions.enableInfiniteScroll){var i=s.$$(t.resultListOptions.resultsContainer).findAll(".coveo-card-layout-padding");r.each(i,function(e){return s.$$(e).remove()})}var o=document.createDocumentFragment();r.times(3,function(){return o.appendChild(s.$$("div",{className:"coveo-card-layout coveo-card-layout-padding"}).el)}),n(o)}n(null)})},t}(o.ResultListRenderer);t.ResultListCardRenderer=a},497:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,a)}l((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(202),a=n(438),l=n(1),u=n(0),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.resultListOptions=t,i.autoCreateComponentsFn=n,i.shouldDisplayHeader=!0,i.shouldDisplayFooter=!1,i.resultListOptions.resultTemplate instanceof a.TableTemplate&&(i.resultListOptions.resultTemplate.hasTemplateWithRole("table-footer")&&(i.shouldDisplayFooter=!0),0===i.resultListOptions.resultTemplate.templates.length||i.resultListOptions.resultTemplate.hasTemplateWithRole("table-header")||(i.shouldDisplayHeader=!1)),i}return i(t,e),t.prototype.getStartFragment=function(e,t){if(!t&&!u.isEmpty(e)&&this.shouldDisplayHeader)return this.renderRoledTemplate("table-header")},t.prototype.getEndFragment=function(e,t){if(!t&&!u.isEmpty(e)&&this.shouldDisplayFooter)return this.renderRoledTemplate("table-footer")},t.prototype.renderRoledTemplate=function(e){return o(this,void 0,void 0,function(){var t,n;return s(this,function(i){switch(i.label){case 0:return[4,this.resultListOptions.resultTemplate.instantiateRoleToElement(e)];case 1:return t=i.sent(),l.$$(t).addClass("coveo-result-list-"+e),this.autoCreateComponentsFn(t,void 0),n=document.createDocumentFragment(),n.appendChild(t),[2,n]}})})},t}(r.ResultListRenderer);t.ResultListTableRenderer=c},498:function(e,t){},499:function(e,t){},500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(12),s=n(1),r=n(442),a=function(){function e(e){this.options=e,this.create()}return e.prototype.create=function(){var e=this,t=s.$$("div");this.collapseButton=new r.DynamicFacetHeaderButton({label:i.l("CollapseFacet",this.options.title),iconSVG:o.SVGIcons.icons.arrowUp,iconClassName:"coveo-dynamic-facet-collapse-toggle-svg",className:"coveo-dynamic-facet-header-collapse",shouldDisplay:!0,action:function(){return e.options.collapse()}}),this.expandButton=new r.DynamicFacetHeaderButton({label:i.l("ExpandFacet",this.options.title),iconSVG:o.SVGIcons.icons.arrowDown,iconClassName:"coveo-dynamic-facet-collapse-toggle-svg",className:"coveo-dynamic-facet-header-expand",shouldDisplay:!1,action:function(){return e.options.expand()}}),t.append(this.collapseButton.element),t.append(this.expandButton.element),this.element=t.el},e.prototype.toggleButtons=function(e){this.collapseButton.toggle(!e),this.expandButton.toggle(e)},e}();t.DynamicFacetHeaderCollapseToggle=a},502:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(203),s=n(114),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.init=function(e,n,i){o.ResponsiveFacetColumn.init(t,e,n,i,s.DynamicFacet.ID)},t}(o.ResponsiveFacetColumn);t.ResponsiveDynamicFacets=r},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(444);var i=n(1),o=n(6),s=n(12),r=n(10),a=function(){function e(e){this.facet=e,this.create()}return e.prototype.create=function(){this.element=i.$$("div",{className:"coveo-dynamic-facet-breadcrumb coveo-breadcrumb-item"}).el,this.createAndAppendTitle();var e=this.facet.values.activeValues,t=e.slice(0,this.facet.options.numberOfValuesInBreadcrumb),n=e.slice(this.facet.options.numberOfValuesInBreadcrumb);this.createAndAppendBreadcrumbValues(t),n.length&&this.createAndAppendCollapsedBreadcrumbs(n)},e.prototype.createAndAppendTitle=function(){var e=i.$$("h3",{className:"coveo-dynamic-facet-breadcrumb-title"},this.facet.options.title+":").el;this.element.appendChild(e)},e.prototype.createAndAppendBreadcrumbValues=function(e){var t=this;e.forEach(function(e){return t.createAndAppendBreadcrumbValue(e)})},e.prototype.createAndAppendBreadcrumbValue=function(e){var t=this,n=i.$$("button",{className:"coveo-dynamic-facet-breadcrumb-value",ariaLabel:o.l("RemoveFilterOn",e.displayValue)},e.displayValue).el,r=i.$$("span",{className:"coveo-dynamic-facet-breadcrumb-value-clear"},s.SVGIcons.icons.mainClear).el;n.appendChild(r),i.$$(n).on("click",function(){return t.valueSelectAction(e)}),this.element.appendChild(n)},e.prototype.valueSelectAction=function(e){var t=this;this.facet.deselectValue(e.value),this.facet.triggerNewQuery(function(){return t.logActionToAnalytics()})},e.prototype.logActionToAnalytics=function(){this.facet.logAnalyticsEvent(r.analyticsActionCauseList.breadcrumbFacet,this.facet.basicAnalyticsFacetMeta)},e.prototype.createAndAppendCollapsedBreadcrumbs=function(e){var t=this,n=o.l("NMore",""+e.length),s=e.map(function(e){return e.value}).join("\n"),r=i.$$("button",{className:"coveo-dynamic-facet-breadcrumb-collapse",title:s},n).el;i.$$(r).on("click",function(){i.$$(r).remove(),t.createAndAppendBreadcrumbValues(e)}),this.element.appendChild(r)},e}();t.DynamicFacetBreadcrumbs=a},504:function(e,t){},505:function(e,t,n){"use strict";function i(e){return!!o[e]}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e.score="score",e.alphanumeric="alphanumeric",e.occurrences="occurrences"}(o=t.FacetSortCriteria||(t.FacetSortCriteria={})),t.isFacetSortCriteria=i},506:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,a)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(507),r=n(6),a=n(511),l=n(204),u=n(64),c=n(512);n(513);var p=function(){function e(e){var t=this;this.facet=e,this.facetSearchController=new a.FacetSearchController(this.facet),this.combobox=new s.Combobox({label:r.l("SearchFacetResults",this.facet.options.title),searchInterface:this.facet.searchInterface,requestValues:function(e){return t.facetSearch(e)},createValuesFromResponse:function(e){return t.createValuesFromResponse(e)},onSelectValue:this.onSelectValue,placeholderText:r.l("Search"),wrapperClassName:"coveo-dynamic-facet-search",clearOnBlur:!0}),this.element=this.combobox.element}return e.prototype.facetSearch=function(e){return i(this,void 0,void 0,function(){return o(this,function(t){return[2,this.facetSearchController.search(e)]})})},e.prototype.createValuesFromResponse=function(e){var t=this;return e.values.map(function(e,n){var i=new l.DynamicFacetValue({value:e.rawValue,displayValue:e.displayValue,numberOfResults:e.count,state:u.FacetValueState.idle,position:n+1},t.facet,c.DynamicFacetSearchValueRenderer);return{value:i,element:i.renderedElement}})},e.prototype.onSelectValue=function(e){e.value.renderer.selectAction()},e}();t.DynamicFacetSearch=p},507:function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,a)}l((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(508),l=n(0),u=n(12),c=n(14),p=n(509);n(510);var h=n(4),d=n(6),f=function(){function e(e){this.options=e,this.defaultOptions={wrapperClassName:"",noValuesFoundLabel:d.l("NoValuesFound"),clearOnBlur:!1},this.isThrottledRequestCancelled=!1,this.throttlingDelay=600,this.throttledTriggerNewRequest=l.throttle(this.triggerRequest,this.throttlingDelay,{leading:!0,trailing:!0}),this.options=i({},this.defaultOptions,this.options),this.id=l.uniqueId("coveo-combobox-"),this.create()}return e.prototype.create=function(){this.element=r.$$("div",{className:"coveo-combobox-wrapper "+this.options.wrapperClassName}).el,this.createAndAppendInput(),this.createAndAppendWaitAnimation(),this.createAndAppendValues()},e.prototype.createAndAppendInput=function(){this.input=new a.ComboboxInput(this),this.element.appendChild(this.input.element)},e.prototype.createAndAppendWaitAnimation=function(){this.waitAnimationElement=r.$$("div",{className:"coveo-combobox-wait-animation"},u.SVGIcons.icons.loading).el,c.SVGDom.addClassToSVGInContainer(this.waitAnimationElement,"coveo-combobox-wait-animation-svg"),this.toggleWaitAnimation(!1),this.input.element.appendChild(this.waitAnimationElement)},e.prototype.toggleWaitAnimation=function(e){r.$$(this.waitAnimationElement).toggle(e)},e.prototype.createAndAppendValues=function(){this.values=new p.ComboboxValues(this),this.element.appendChild(this.values.element)},e.prototype.clearAll=function(){this.clearValues(),this.input.clearInput()},e.prototype.clearValues=function(){this.values.clearValues(),this.cancelRequest()},e.prototype.cancelRequest=function(){this.toggleWaitAnimation(!1),this.throttledTriggerNewRequest.cancel(),this.isThrottledRequestCancelled=!0},e.prototype.onInputChange=function(e){if(h.Utils.isEmptyString(e))return this.clearValues();this.toggleWaitAnimation(!0),this.throttledTriggerNewRequest(e)},e.prototype.onInputBlur=function(){if(!this.values.mouseIsOverValue)return this.options.clearOnBlur?this.clearAll():void this.clearValues()},e.prototype.updateAccessibilityAttributes=function(e){this.input.updateAccessibilityAttributes(e)},e.prototype.updateAriaLive=function(e){this.options.searchInterface.ariaLive.updateText(e)},e.prototype.triggerRequest=function(e){return o(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this.isThrottledRequestCancelled=!1,[4,this.options.requestValues(e)];case 1:return t=n.sent(),this.toggleWaitAnimation(!1),this.isThrottledRequestCancelled||this.values.renderFromResponse(t),[2]}})})},e}();t.Combobox=f},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),o=n(1),s=n(25),r=n(4),a=function(){function e(e){this.combobox=e,this.inputOptions={usePlaceholder:!0,className:"coveo-combobox-input",triggerOnChangeAsYouType:!0,isRequired:!1},this.create(),this.element=this.textInput.getElement(),this.inputElement=o.$$(this.element).find("input"),this.addEventListeners(),this.addAccessibilityAttributes()}return e.prototype.create=function(){var e=this;this.textInput=new i.TextInput(function(t){return e.combobox.onInputChange(t.getValue())},this.combobox.options.placeholderText,this.inputOptions)},e.prototype.addEventListeners=function(){var e=this;this.combobox.options.clearOnBlur||o.$$(this.inputElement).on("focus",function(){return e.combobox.onInputChange(e.textInput.getValue())}),o.$$(this.inputElement).on("blur",function(){return e.combobox.onInputBlur()}),o.$$(this.inputElement).on("keydown",function(t){return e.handleKeyboardUpDownArrows(t)}),o.$$(this.inputElement).on("keyup",function(t){return e.handleKeyboardEnterEscape(t)})},e.prototype.addAccessibilityAttributes=function(){var e=this.combobox.id+"-listbox";this.element.setAttribute("role","combobox"),this.element.setAttribute("aria-owns",e),this.element.setAttribute("aria-haspopup","listbox"),this.inputElement.setAttribute("id",this.combobox.id+"-input"),this.inputElement.setAttribute("aria-autocomplete","list"),this.inputElement.setAttribute("aria-controls",e),this.inputElement.setAttribute("aria-label",this.combobox.options.label),this.updateAccessibilityAttributes({activeDescendant:"",expanded:!1})},e.prototype.updateAccessibilityAttributes=function(e){this.element.setAttribute("aria-expanded",e.expanded?"true":"false"),r.Utils.isEmptyString(e.activeDescendant)?this.inputElement.removeAttribute("aria-activedescendant"):this.inputElement.setAttribute("aria-activedescendant",e.activeDescendant)},e.prototype.clearInput=function(){this.textInput.reset()},e.prototype.handleKeyboardUpDownArrows=function(e){switch(e.which){case s.KEYBOARD.DOWN_ARROW:e.preventDefault(),this.combobox.values.moveActiveValueDown();break;case s.KEYBOARD.UP_ARROW:e.preventDefault(),this.combobox.values.moveActiveValueUp()}},e.prototype.handleKeyboardEnterEscape=function(e){switch(e.which){case s.KEYBOARD.ENTER:this.combobox.values.selectActiveValue();break;case s.KEYBOARD.ESCAPE:r.Utils.isNonEmptyString(this.textInput.getValue())&&e.stopPropagation(),this.combobox.clearAll()}},e}();t.ComboboxInput=a},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),s=function(){function e(e){this.combobox=e,this.mouseIsOverValue=!1,this.values=[],this.element=i.$$("ul",{id:this.combobox.id+"-listbox",role:"listbox",className:"coveo-combobox-values",ariaLabelledby:this.combobox.id+"-input"}).el,i.$$(this.element).hide()}return e.prototype.renderFromResponse=function(e){this.clearValues(),this.values=this.combobox.options.createValuesFromResponse(e),this.render()},e.prototype.render=function(){if(i.$$(this.element).show(),!this.hasValues())return this.renderNoValuesFound();this.renderValues(),this.addEventListeners(),this.updateAccessibilityAttributes()},e.prototype.renderValues=function(){var e=this,t=document.createDocumentFragment();this.values.forEach(function(n,o){var s=i.$$("li",{id:e.combobox.id+"-value-"+o,className:"coveo-combobox-value",role:"option"},n.element).el;n.element=s,t.appendChild(n.element)}),this.element.appendChild(t)},e.prototype.hasValues=function(){return!!this.values.length},e.prototype.renderNoValuesFound=function(){var e=this.combobox.options.noValuesFoundLabel,t=i.$$("li",{role:"option",className:"coveo-combobox-value-not-found"},e).el;this.element.appendChild(t),this.combobox.updateAriaLive(e)},e.prototype.addEventListeners=function(){var e=this;this.values.forEach(function(t){var n=t.element;i.$$(n).on("mouseenter",function(){return e.mouseIsOverValue=!0}),i.$$(n).on("mouseleave",function(){return e.mouseIsOverValue=!1}),i.$$(n).on("click",function(t){return e.onValueClick(t)})})},e.prototype.onValueClick=function(e){var t=e.target,n=i.$$(t).hasClass("coveo-combobox-value")?t:i.$$(t).parent("coveo-combobox-value");if(n){var s=n.getAttribute("id"),r=o.find(this.values,function(e){return e.element.getAttribute("id")===s});r&&this.combobox.options.onSelectValue(r),this.combobox.clearAll()}},e.prototype.updateAccessibilityAttributes=function(){var e=this.keyboardActiveValue?this.keyboardActiveValue.element.getAttribute("id"):"";this.combobox.updateAccessibilityAttributes({activeDescendant:e,expanded:this.hasValues()})},e.prototype.clearValues=function(){this.mouseIsOverValue=!1,this.resetKeyboardActiveValue(),i.$$(this.element).empty(),i.$$(this.element).hide(),this.values=[],this.updateAccessibilityAttributes()},e.prototype.setKeyboardActiveValue=function(e){this.keyboardActiveValue=e,this.activateFocusOnValue(this.keyboardActiveValue)},e.prototype.resetKeyboardActiveValue=function(){this.keyboardActiveValue&&(this.deactivateFocusOnValue(this.keyboardActiveValue),this.keyboardActiveValue=null)},e.prototype.activateFocusOnValue=function(e){var t=e.element;i.$$(t).addClass("coveo-focused"),t.setAttribute("aria-selected","true")},e.prototype.deactivateFocusOnValue=function(e){var t=e.element;i.$$(t).removeClass("coveo-focused"),t.setAttribute("aria-selected","false")},e.prototype.selectActiveValue=function(){this.keyboardActiveValue&&(this.combobox.options.onSelectValue(this.keyboardActiveValue),this.combobox.clearAll())},e.prototype.moveActiveValueDown=function(){if(this.hasValues()){var e=this.nextOrFirstValue;this.resetKeyboardActiveValue(),this.setKeyboardActiveValue(e),this.updateAccessibilityAttributes()}},e.prototype.moveActiveValueUp=function(){if(this.hasValues()){var e=this.previousOrLastValue;this.resetKeyboardActiveValue(),this.setKeyboardActiveValue(e),this.updateAccessibilityAttributes()}},Object.defineProperty(e.prototype,"nextOrFirstValue",{get:function(){if(!this.keyboardActiveValue)return this.values[0];var e=(this.values.indexOf(this.keyboardActiveValue)+1)%this.values.length;return this.values[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousOrLastValue",{get:function(){var e=this.values.length-1;if(!this.keyboardActiveValue)return this.values[e];var t=this.values.indexOf(this.keyboardActiveValue)-1;return t>=0?this.values[t]:this.values[e]},enumerable:!0,configurable:!0}),e}();t.ComboboxValues=s},510:function(e,t){},511:function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(111),s=n(21),r=n(29),a=function(){function e(e){this.facet=e}return e.prototype.getMonthsValueCaptions=function(){for(var e={},t=1;t<=12;t++){e[("0"+t).substr(-2)]=r.DateUtils.monthToString(t-1)}return e},e.prototype.addTypesCaptionsIfNecessary=function(){var e=this.facet.options.field.toLowerCase(),t=s.QueryUtils.isStratusAgnosticField(e,"@filetype"),n=s.QueryUtils.isStratusAgnosticField(e,"@objecttype"),i=s.QueryUtils.isStratusAgnosticField(e,"@month");return t||n?o.FileTypes.getFileTypeCaptions():i?this.getMonthsValueCaptions():{}},Object.defineProperty(e.prototype,"captions",{get:function(){return i({},this.addTypesCaptionsIfNecessary(),this.facet.options.valueCaption)},enumerable:!0,configurable:!0}),e.prototype.search=function(e){var t=this.facet.options.useLeadingWildcardInFacetSearch?"*":"",n={field:this.facet.fieldName,numberOfValues:this.facet.options.numberOfValues,ignoreValues:this.facet.values.allValues,captions:this.captions,searchContext:this.facet.queryController.getLastQuery(),query:""+t+e+"*"};return this.facet.queryController.getEndpoint().facetSearch(n)},e}();t.FacetSearchController=a},512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(443),s=function(){function e(e,t){this.facetValue=e,this.facet=t}return e.prototype.render=function(){return this.dom=i.$$("div",{className:"coveo-dynamic-facet-value",dataValue:this.facetValue.value}),this.renderCheckbox(),this.dom.el},e.prototype.renderCheckbox=function(){this.valueCheckbox=new o.DynamicFacetValueCheckbox(this.facetValue),i.$$(this.valueCheckbox.element).find("button").setAttribute("tabindex","-1"),this.dom.append(this.valueCheckbox.element)},e.prototype.selectAction=function(){var e=this;this.facet.enableFreezeFacetOrderFlag(),this.facet.toggleSelectValue(this.facetValue.value),this.facet.scrollToTop(),this.facet.triggerNewQuery(function(){return e.facetValue.logSelectActionToAnalytics()})},e}();t.DynamicFacetSearchValueRenderer=s},513:function(e,t){},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),o=n(204),s=n(64),r=n(448),a=function(){function e(e){this.facet=e}return e.prototype.getDisplayValue=function(e){return i.FacetUtils.getDisplayValueFromValueCaption(e,this.facet.options.field,this.facet.options.valueCaption)},e.prototype.createFromResponse=function(e,t){return new o.DynamicFacetValue({value:e.value,displayValue:this.getDisplayValue(e.value),numberOfResults:e.numberOfResults,state:e.state,position:t+1},this.facet,r.DynamicFacetValueRenderer)},e.prototype.createFromValue=function(e){var t=this.facet.values.allFacetValues.length+1,n=s.FacetValueState.idle,i=this.getDisplayValue(e);return new o.DynamicFacetValue({value:e,displayValue:i,state:n,numberOfResults:0,position:t},this.facet,r.DynamicFacetValueRenderer)},e.prototype.createFromRange=function(){return null},e}();t.DynamicFacetValueCreator=a},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.idle="idle",e.selected="selected"}(t.FacetValueState||(t.FacetValueState={}))},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8);t.ResponsiveFacetOptions={enableResponsiveMode:i.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"ResponsiveOptions"}),responsiveBreakpoint:i.ComponentOptions.buildNumberOption({deprecated:"This option is exposed for legacy reasons. It is not recommended to use this option. Instead, use `SearchInterface.options.responsiveMediumBreakpoint` options exposed on the `SearchInterface`."}),dropdownHeaderLabel:i.ComponentOptions.buildLocalizedStringOption({section:"ResponsiveOptions"})}},87:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,a)}l((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0}),n(491),n(492),n(493);var r=n(0),a=n(11),l=n(128),u=n(31),c=n(3),p=n(5),h=n(30),d=n(15),f=n(13),m=n(22),y=n(1),g=n(82),v=n(4),b=n(10),C=n(7),O=n(8),S=n(2),F=n(172),T=n(59),w=n(494),_=n(441),V=n(439),A=n(115),R=n(438),D=n(65),E=n(88),$=n(495),I=n(496),x=n(202),H=n(497),L=n(109),M=n(440);_.CoreHelpers.exportAllHelpersGlobally(window.Coveo);var P=function(e){function t(n,i,o,s){void 0===s&&(s=t.ID);var r=e.call(this,n,s,o)||this;return r.element=n,r.options=i,r.bindings=o,r.currentlyDisplayedResults=[],r.reachedTheEndOfResults=!1,r.disableLayoutChange=!1,r.successiveScrollCount=0,r.options=O.ComponentOptions.initComponentOptions(n,t,i),p.Assert.exists(n),p.Assert.exists(r.options),p.Assert.exists(r.options.resultTemplate),p.Assert.exists(r.options.infiniteScrollContainer),r.showOrHideElementsDependingOnState(!1,!1),r.bind.onRootElement(a.QueryEvents.newQuery,function(e){return r.handleNewQuery()}),r.bind.onRootElement(a.QueryEvents.buildingQuery,function(e){return r.handleBuildingQuery(e)}),r.bind.onRootElement(a.QueryEvents.querySuccess,function(e){return r.handleQuerySuccess(e)}),r.bind.onRootElement(a.QueryEvents.duringQuery,function(e){return r.handleDuringQuery()}),r.bind.onRootElement(a.QueryEvents.queryError,function(e){return r.handleQueryError()}),y.$$(r.root).on(u.ResultListEvents.changeLayout,function(e,t){return r.handleChangeLayout(t)}),r.options.enableInfiniteScroll&&(r.handlePageChanged(),r.bind.on(r.options.infiniteScrollContainer,"scroll",function(e){r.successiveScrollCount=0,r.handleScrollOfResultList()})),r.bind.onQueryState(d.MODEL_EVENTS.CHANGE_ONE,f.QUERY_STATE_ATTRIBUTES.FIRST,function(){return r.handlePageChanged()}),r.resultContainer=r.initResultContainer(),p.Assert.exists(r.options.resultsContainer),r.initWaitAnimationContainer(),p.Assert.exists(r.options.waitAnimationContainer),r.setupTemplatesVersusLayouts(),y.$$(r.root).on(l.ResultLayoutEvents.populateResultLayout,function(e,t){return t.layouts.push(r.options.layout)}),r.setupRenderer(),r}return i(t,e),t.getDefaultTemplate=function(e){var n=t.loadTemplatesFromCache();if(null!=n)return n;var i=C.Component.get(e);return Coveo.Recommendation&&i.searchInterface instanceof Coveo.Recommendation?new V.DefaultRecommendationTemplate:new A.DefaultResultTemplate},t.loadTemplatesFromCache=function(){var e=D.TemplateCache.getResultListTemplateNames();return e.length>0?new E.TemplateList(r.compact(r.map(e,function(e){return D.TemplateCache.getTemplate(e)}))):null},t.prototype.getAutoSelectedFieldsToInclude=function(){return r.chain(this.options.resultTemplate.getFields()).concat(this.getMinimalFieldsToInclude()).compact().unique().value()},t.prototype.setupTemplatesVersusLayouts=function(){var e=this,t="coveo-"+this.options.layout+"-layout-container";this.resultContainer.addClass(t),"table"===this.options.layout&&(this.options.resultTemplate=new R.TableTemplate(this.options.resultTemplate.templates||[])),this.options.resultTemplate instanceof E.TemplateList?r.each(this.options.resultTemplate.templates,function(t){t.layout||(t.layout=e.options.layout)}):this.options.resultTemplate instanceof A.DefaultResultTemplate&&"list"==this.options.layout&&w.ResponsiveDefaultResultTemplate.init(this.root,this,{})},t.prototype.renderResults=function(e,t){var n=this;return void 0===t&&(t=!1),t||this.resultContainer.empty(),this.renderer.renderResults(e,t,this.triggerNewResultDisplayed.bind(this)).then(function(){return n.triggerNewResultsDisplayed()})},t.prototype.buildResults=function(e){var t=this.options.layout;return this.templateToHtml.buildResults(e,t,this.currentlyDisplayedResults)},t.prototype.buildResult=function(e){var t=this.options.layout;return this.templateToHtml.buildResult(e,t,this.currentlyDisplayedResults)},t.prototype.displayMoreResults=function(e){return p.Assert.isLargerOrEqualsThan(1,e),this.isCurrentlyFetchingMoreResults()?void this.logger.warn("Ignoring request to display more results since we're already doing so"):this.hasPotentiallyMoreResultsToDisplay()?(this.options.enableInfiniteScrollWaitingAnimation&&this.showWaitingAnimationForInfiniteScrolling(),this.fetchAndRenderMoreResults(e)):void this.logger.warn("Ignoring request to display more results since we know there aren't more to display")},Object.defineProperty(t.prototype,"templateToHtml",{get:function(){var e={resultTemplate:this.options.resultTemplate,searchInterface:this.searchInterface,queryStateModel:this.queryStateModel};return new M.TemplateToHtml(e)},enumerable:!0,configurable:!0}),t.prototype.getDisplayedResults=function(){return this.currentlyDisplayedResults},t.prototype.getDisplayedResultsElements=function(){return this.resultContainer.getResultElements()},t.prototype.enable=function(){var t=this;e.prototype.enable.call(this),this.disableLayoutChange=!1,r.each(this.resultLayoutSelectors,function(e){e.enableLayouts([t.options.layout])}),y.$$(this.element).removeClass("coveo-hidden")},t.prototype.disable=function(){var t=this;e.prototype.disable.call(this);var n=r.map(this.otherResultLists,function(e){return e.options.layout});r.contains(n,this.options.layout)||this.disableLayoutChange||r.each(this.resultLayoutSelectors,function(e){e.disableLayouts([t.options.layout])}),this.disableLayoutChange=!1,y.$$(this.element).addClass("coveo-hidden")},t.prototype.autoCreateComponentsInsideResult=function(e,t){return this.templateToHtml.autoCreateComponentsInsideResult(e,t)},t.prototype.triggerNewResultDisplayed=function(e,t){var n={result:e,item:t};y.$$(this.element).trigger(u.ResultListEvents.newResultDisplayed,n)},t.prototype.triggerNewResultsDisplayed=function(){y.$$(this.element).trigger(u.ResultListEvents.newResultsDisplayed,{})},t.prototype.fetchAndRenderMoreResults=function(e){return o(this,void 0,void 0,function(){var t,n;return s(this,function(i){switch(i.label){case 0:this.fetchingMoreResults=this.queryController.fetchMore(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchingMoreResults];case 2:return t=i.sent(),p.Assert.exists(t),this.usageAnalytics.logCustomEvent(b.analyticsActionCauseList.pagerScrolling,{},this.element),this.reachedTheEndOfResults=e>t.results.length,this.renderNewResults(t),this.resetStateAfterFetchingMoreResults(),[2,t];case 3:return n=i.sent(),this.resetStateAfterFetchingMoreResults(),[2,Promise.reject(n)];case 4:return[2]}})})},t.prototype.renderNewResults=function(e){return o(this,void 0,void 0,function(){var t,n;return s(this,function(i){switch(i.label){case 0:return[4,this.buildResults(e)];case 1:return t=i.sent(),this.renderResults(t,!0),(n=this.currentlyDisplayedResults).push.apply(n,e.results),this.triggerNewResultsDisplayed(),[2]}})})},t.prototype.resetStateAfterFetchingMoreResults=function(){var e=this;this.hideWaitingAnimationForInfiniteScrolling(),this.fetchingMoreResults=void 0,h.Defer.defer(function(){e.successiveScrollCount++,e.successiveScrollCount<=t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS?e.handleScrollOfResultList():e.logger.info("Result list has triggered 5 consecutive queries to try and fill up the scrolling container, but it is still unable to do so.\n          Try explicitly setting the 'data-infinite-scroll-container-selector' option on the result list. See: https://coveo.github.io/search-ui/components/resultlist.html#options.infinitescrollcontainer")})},t.prototype.handleDuringQuery=function(){this.logger.trace("Emptying the result container"),this.cancelFetchingMoreResultsIfNeeded(),this.showWaitingAnimation(),this.showOrHideElementsDependingOnState(!1,!1)},t.prototype.handleQueryError=function(){this.hideWaitingAnimation(),this.resultContainer.empty(),this.currentlyDisplayedResults=[],this.reachedTheEndOfResults=!0},t.prototype.handleQuerySuccess=function(e){var n=this;p.Assert.exists(e),p.Assert.exists(e.results);var i=e.results;this.logger.trace("Received query results from new query",i),this.hideWaitingAnimation(),t.resultCurrentlyBeingRendered=void 0,this.reachedTheEndOfResults=e.query.numberOfResults>e.results.results.length,this.currentlyDisplayedResults=[],this.buildResults(e.results).then(function(t){return o(n,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.renderResults(t)];case 1:return n.sent(),this.showOrHideElementsDependingOnState(!0,0!=this.currentlyDisplayedResults.length),m.DeviceUtils.isMobileDevice()&&void 0!=this.options.mobileScrollContainer&&(this.options.mobileScrollContainer.scrollTop=0),this.options.enableInfiniteScroll&&i.results.length==e.queryBuilder.numberOfResults&&(this.scrollToTopIfEnabled(),this.handleScrollOfResultList()),[2]}})})})},t.prototype.handleScrollOfResultList=function(){!this.isCurrentlyFetchingMoreResults()&&this.options.enableInfiniteScroll&&this.isScrollingOfResultListAlmostAtTheBottom()&&this.hasPotentiallyMoreResultsToDisplay()&&this.displayMoreResults(this.options.infiniteScrollPageSize)},t.prototype.handlePageChanged=function(){var e=this;this.bind.onRootElement(a.QueryEvents.deferredQuerySuccess,function(){setTimeout(function(){e.scrollToTopIfEnabled()},0)})},t.prototype.scrollToTopIfEnabled=function(){this.options.enableScrollToTop&&L.ResultListUtils.scrollToTop(this.root)},t.prototype.handleNewQuery=function(){y.$$(this.element).removeClass("coveo-hidden"),t.resultCurrentlyBeingRendered=void 0},Object.defineProperty(t.prototype,"otherResultLists",{get:function(){var e=this.searchInterface.getComponents(t.ID);return r.without(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultLayoutSelectors",{get:function(){return this.searchInterface.getComponents("ResultLayoutSelector")},enumerable:!0,configurable:!0}),t.prototype.handleBuildingQuery=function(e){if(null!=this.options.fieldsToInclude&&e.queryBuilder.addFieldsToInclude(r.map(this.options.fieldsToInclude,function(e){return e.substr(1)})),this.options.autoSelectFieldsToInclude){var t=r.flatten(r.map(this.otherResultLists,function(e){return e.getAutoSelectedFieldsToInclude()}));e.queryBuilder.addRequiredFields(r.unique(t.concat(this.getAutoSelectedFieldsToInclude()))),e.queryBuilder.includeRequiredFields=!0}},t.prototype.handleChangeLayout=function(e){var t=this;e.layout===this.options.layout?(this.disableLayoutChange=!1,this.enable(),this.options.resultTemplate.layout=this.options.layout,e.results&&(this.resultContainer.isEmpty()&&new F.InitializationPlaceholder(this.root).withVisibleRootElement().withPlaceholderForResultList(),h.Defer.defer(function(){return o(t,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.buildResults(e.results)];case 1:return t=n.sent(),this.renderResults(t),this.showOrHideElementsDependingOnState(!0,0!==this.currentlyDisplayedResults.length),[2]}})})}))):(this.disableLayoutChange=!0,this.disable(),this.resultContainer.empty())},t.prototype.isCurrentlyFetchingMoreResults=function(){return v.Utils.exists(this.fetchingMoreResults)},t.prototype.getMinimalFieldsToInclude=function(){return["author","language","urihash","objecttype","collection","source","language","permanentid"]},t.prototype.isScrollingOfResultListAlmostAtTheBottom=function(){var e;try{e=this.options.infiniteScrollContainer instanceof Window}catch(t){e=!1}return e?this.isScrollAtBottomForWindowElement():this.isScrollAtBottomForHtmlElement()},t.prototype.isScrollAtBottomForWindowElement=function(){var e=new y.Win(window),t=e.height(),n=e.scrollY();return new y.Doc(document).height()-(t+n)<t/2},t.prototype.isScrollAtBottomForHtmlElement=function(){var e=this.options.infiniteScrollContainer,t=e.clientHeight;return e.scrollHeight-(e.scrollTop+t)<t/2},t.prototype.hasPotentiallyMoreResultsToDisplay=function(){return this.currentlyDisplayedResults.length>0&&!this.reachedTheEndOfResults},t.prototype.cancelFetchingMoreResultsIfNeeded=function(){this.isCurrentlyFetchingMoreResults()&&(this.logger.trace("Cancelling fetching more results"),Promise.reject(this.fetchingMoreResults),this.fetchingMoreResults=void 0)},t.prototype.showOrHideElementsDependingOnState=function(e,t){var n=y.$$(this.element).findAll(".coveo-show-if-query"),i=y.$$(this.element).findAll(".coveo-show-if-no-query"),o=y.$$(this.element).findAll(".coveo-show-if-results"),s=y.$$(this.element).findAll(".coveo-show-if-no-results");r.each(n,function(t){y.$$(t).toggle(e)}),r.each(i,function(t){y.$$(t).toggle(!e)}),r.each(o,function(n){y.$$(n).toggle(e&&t)}),r.each(s,function(n){y.$$(n).toggle(e&&!t)})},Object.defineProperty(t.prototype,"waitAnimation",{get:function(){return this.options.waitAnimation.toLowerCase()},enumerable:!0,configurable:!0}),t.prototype.showWaitingAnimation=function(){switch(this.waitAnimation){case"fade":y.$$(this.options.waitAnimationContainer).addClass("coveo-fade-out");break;case"spinner":this.resultContainer.hideChildren(),void 0==y.$$(this.options.waitAnimationContainer).find(".coveo-wait-animation")&&this.options.waitAnimationContainer.appendChild(g.DomUtils.getBasicLoadingAnimation())}},t.prototype.hideWaitingAnimation=function(){switch(this.waitAnimation){case"fade":y.$$(this.options.waitAnimationContainer).removeClass("coveo-fade-out");break;case"spinner":var e=y.$$(this.options.waitAnimationContainer).find(".coveo-loading-spinner");e&&y.$$(e).detach()}},t.prototype.showWaitingAnimationForInfiniteScrolling=function(){var e=g.DomUtils.getLoadingSpinner();if("card"==this.options.layout&&this.options.enableInfiniteScroll){var t=y.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");r.each(t,function(e){return y.$$(e).remove()});var n=y.$$("div",{className:"coveo-loading-spinner-container"});n.append(e),this.options.waitAnimationContainer.appendChild(n.el)}else this.options.waitAnimationContainer.appendChild(g.DomUtils.getLoadingSpinner())},t.prototype.hideWaitingAnimationForInfiniteScrolling=function(){var e=y.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner"),t=y.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");r.each(e,function(e){return y.$$(e).remove()}),r.each(t,function(e){return y.$$(e).remove()})},t.prototype.initResultContainer=function(){if(!this.options.resultsContainer){var e="table"===this.options.layout?"table":"div";this.options.resultsContainer=y.$$(e,{className:"coveo-result-list-container"}).el,this.initResultContainerAddToDom()}return new $.ResultContainer(this.options.resultsContainer,this.searchInterface)},t.prototype.initResultContainerAddToDom=function(){this.element.appendChild(this.options.resultsContainer)},t.prototype.initWaitAnimationContainer=function(){this.options.waitAnimationContainer||(this.options.waitAnimationContainer=this.resultContainer.el)},t.prototype.setupRenderer=function(){var e={options:this.searchInterface.options.originalOptionsObject,bindings:this.bindings},t=function(t){return S.Initialization.automaticallyCreateComponentsInside(t,e)};switch(this.options.layout){case"card":this.renderer=new I.ResultListCardRenderer(this.options,t);break;case"table":this.renderer=new H.ResultListTableRenderer(this.options,t);break;case"list":default:this.renderer=new x.ResultListRenderer(this.options,t)}},t.ID="ResultList",t.doExport=function(){c.exportGlobally({ResultList:t})},t.options={resultsContainer:O.ComponentOptions.buildChildHtmlElementOption(),resultTemplate:T.TemplateComponentOptions.buildTemplateOption({defaultFunction:t.getDefaultTemplate}),waitAnimation:O.ComponentOptions.buildStringOption({defaultValue:"none"}),waitAnimationContainer:O.ComponentOptions.buildChildHtmlElementOption({postProcessing:function(e,t){return e||t.resultsContainer}}),enableInfiniteScroll:O.ComponentOptions.buildBooleanOption({defaultValue:!1}),infiniteScrollPageSize:O.ComponentOptions.buildNumberOption({defaultValue:10,min:1,depend:"enableInfiniteScroll"}),infiniteScrollContainer:O.ComponentOptions.buildChildHtmlElementOption({depend:"enableInfiniteScroll",defaultFunction:function(e){return O.ComponentOptions.findParentScrolling(e)}}),enableInfiniteScrollWaitingAnimation:O.ComponentOptions.buildBooleanOption({depend:"enableInfiniteScroll",defaultValue:!0}),mobileScrollContainer:O.ComponentOptions.buildSelectorOption({defaultFunction:function(){return document.querySelector(".coveo-results-column")}}),autoSelectFieldsToInclude:O.ComponentOptions.buildBooleanOption({defaultValue:!1}),fieldsToInclude:O.ComponentOptions.buildFieldsOption({includeInResults:!0}),layout:O.ComponentOptions.buildStringOption({defaultValue:"list",required:!0}),enableScrollToTop:O.ComponentOptions.buildBooleanOption({defaultValue:!0,depend:"enableInfiniteScroll"})},t.resultCurrentlyBeingRendered=null,t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS=5,t}(C.Component);t.ResultList=P,S.Initialization.registerAutoCreateComponent(P)}});